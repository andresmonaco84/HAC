create or replace procedure PRC_ATS_AUX_REL_PROTOCOLO_S
(
     pIDT IN TB_ATS_AUX_REL_PROTOCOLO.IDT%type DEFAULT NULL,
     pINTAMB IN TB_ATS_AUX_REL_PROTOCOLO.INTAMB%type DEFAULT NULL,
     pPACIENTE IN TB_ATS_AUX_REL_PROTOCOLO.PACIENTE%type DEFAULT NULL,
     pCONVENIOPLANO IN TB_ATS_AUX_REL_PROTOCOLO.CONVENIOPLANO%type DEFAULT NULL,
     pEXAME IN TB_ATS_AUX_REL_PROTOCOLO.EXAME%type DEFAULT NULL,
     pSETORLEITO IN TB_ATS_AUX_REL_PROTOCOLO.SETORLEITO%type DEFAULT NULL,
     pLOCALENTREGA IN TB_ATS_AUX_REL_PROTOCOLO.Localentrega%type DEFAULT NULL,
     pNUMEROEXAME IN TB_ATS_AUX_REL_PROTOCOLO.NUMEROEXAME%type DEFAULT NULL,
     pUSUARIOPROTOCOLO IN TB_ATS_AUX_REL_PROTOCOLO.USUARIOPROTOCOLO%type DEFAULT NULL,
     pIDTLAUDO IN TB_ATS_AUX_REL_PROTOCOLO.IDTLAUDO%type DEFAULT NULL,
     io_cursor OUT PKG_CURSOR.t_cursor
)
is
/********************************************************************
*    Procedure: PRC_ATS_AUX_REL_PROTOCOLO_S
*
*    Data Criacao:   data da  criação   Por: Nome do Analista
*    Data Alteracao:  data da alteração  Por: Nome do Analista
*
*    Funcao: Descrição da funcionalidade da Stored Procedure
*
*******************************************************************/
 v_cursor PKG_CURSOR.t_cursor;
  V_WHERE  varchar2(5000);
  V_SELECT  varchar2(5000);
  V_ORDERBY  varchar2(5000);
begin
  V_WHERE := NULL;
  IF pIDT IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND IDT = ' || pIDT; END IF;
IF pINTAMB IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND INTAMB = ' || pINTAMB; END IF;
IF pPACIENTE IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND PACIENTE = ' || CHR(39) || pPACIENTE || CHR(39); END IF;
IF pCONVENIOPLANO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CONVENIOPLANO = ' || CHR(39) || pCONVENIOPLANO || CHR(39); END IF;
IF pEXAME IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND EXAME = ' || CHR(39) || pEXAME || CHR(39); END IF;
IF pSETORLEITO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND SETORLEITO = ' || CHR(39) || pSETORLEITO || CHR(39); END IF;
IF pLOCALENTREGA IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND LOCALENTREGA = ' || CHR(39) || pLOCALENTREGA || CHR(39); END IF;
IF pNUMEROEXAME IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND NUMEROEXAME = ' || pNUMEROEXAME; END IF;
IF pUSUARIOPROTOCOLO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND USUARIOPROTOCOLO = ' || CHR(39) || pUSUARIOPROTOCOLO || CHR(39); END IF;
IF pIDTLAUDO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND IDTLAUDO = ' || CHR(39) || pIDTLAUDO || CHR(39); END IF;
 V_ORDERBY := ' ORDER BY IDT ';
   V_SELECT := '
SELECT
       IDT,
       INTAMB,
       PACIENTE,
       CONVENIOPLANO,
       EXAME,
       SETORLEITO,
       LOCALENTREGA,
       NUMEROEXAME,
       USUARIOPROTOCOLO,
       IDTLAUDO
FROM TB_ATS_AUX_REL_PROTOCOLO
WHERE null is null  '    ;
OPEN v_cursor FOR
  V_SELECT || V_WHERE || V_ORDERBY ;
  io_cursor := v_cursor;
end PRC_ATS_AUX_REL_PROTOCOLO_S;
