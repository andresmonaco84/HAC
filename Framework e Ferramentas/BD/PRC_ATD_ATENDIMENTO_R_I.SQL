CREATE OR REPLACE PROCEDURE PRC_ATD_ATENDIMENTO_R_I
(
  pNewIdt OUT integer,
  pATD_ATE_TP_PACIENTE IN TB_ATD_ATE_ATENDIMENTO.ATD_ATE_TP_PACIENTE%type,
  pATD_ATE_ID IN TB_ATD_ATE_ATENDIMENTO.ATD_ATE_ID%type default NULL,
  pATD_ATE_DT_ATENDIMENTO IN TB_ATD_ATE_ATENDIMENTO.ATD_ATE_DT_ATENDIMENTO%type,
  pATD_ATE_HR_ATENDIMENTO IN TB_ATD_ATE_ATENDIMENTO.ATD_ATE_HR_ATENDIMENTO%type,
  pCODPAD IN TB_ATD_ATE_ATENDIMENTO.CODPAD%type,
  pATD_ATE_FL_CARATER_SOLIC IN TB_ATD_ATE_ATENDIMENTO.ATD_ATE_FL_CARATER_SOLIC%type,
  pATD_ATE_DS_INDCLINICA IN TB_ATD_ATE_ATENDIMENTO.ATD_ATE_DS_INDCLINICA%type default NULL,
  pATD_ATE_FL_INDIC_RN_OK IN TB_ATD_ATE_ATENDIMENTO.ATD_ATE_FL_INDIC_RN_OK%type default NULL,
  pATD_ATE_FL_RETORNO_OK IN TB_ATD_ATE_ATENDIMENTO.ATD_ATE_FL_RETORNO_OK%type default NULL,
  pATD_ATE_DS_OBSERVACAO IN TB_ATD_ATE_ATENDIMENTO.ATD_ATE_DS_OBSERVACAO%type default NULL,
  pATD_ATE_DT_ULTIMA_ATUALIZACAO IN TB_ATD_ATE_ATENDIMENTO.ATD_ATE_DT_ULTIMA_ATUALIZACAO%type,
  pSEG_USU_ID_USUARIO IN TB_ATD_ATE_ATENDIMENTO.SEG_USU_ID_USUARIO%type default NULL,
  pTIS_TSC_CD_TIPOSAIDACONSULTA IN TB_ATD_ATE_ATENDIMENTO.TIS_TSC_CD_TIPOSAIDACONSULTA%type default NULL,
  pCAD_LAT_ID_LOCAL_ATENDIMENTO IN TB_ATD_ATE_ATENDIMENTO.CAD_LAT_ID_LOCAL_ATENDIMENTO%type,
  pCAD_CID_CD_CID10 IN TB_ATD_ATE_ATENDIMENTO.CAD_CID_CD_CID10%type default NULL,
  pTIS_TAT_CD_TPATENDIMENTO IN TB_ATD_ATE_ATENDIMENTO.TIS_TAT_CD_TPATENDIMENTO%type,
  pTIS_IAC_CD_INDACIDENTE IN TB_ATD_ATE_ATENDIMENTO.TIS_IAC_CD_INDACIDENTE%type default NULL,
  pCAD_UNI_ID_UNIDADE IN TB_ATD_ATE_ATENDIMENTO.CAD_UNI_ID_UNIDADE%type,
  pTIS_CBO_CD_CBOS IN TB_ATD_ATE_ATENDIMENTO.TIS_CBO_CD_CBOS%type,
  pCAD_SET_ID IN TB_ATD_ATE_ATENDIMENTO.CAD_SET_ID%type,
  pCAD_UNI_ID_UNID_PROC IN TB_ATD_ATE_ATENDIMENTO.CAD_UNI_ID_UNID_PROC%type default NULL,
  pCODCLI IN TB_ATD_ATE_ATENDIMENTO.CODCLI%type default NULL,
  pCAD_PRO_ID_PROF_EXEC IN TB_ATD_ATE_ATENDIMENTO.CAD_PRO_ID_PROF_EXEC%type default NULL,
  pATD_ATE_NR_CONSELHO_SOLIC IN TB_ATD_ATE_ATENDIMENTO.ATD_ATE_NR_CONSELHO_SOLIC%type default NULL,
  pATD_ATE_CD_UFCONSELHO_SOLIC IN TB_ATD_ATE_ATENDIMENTO.ATD_ATE_CD_UFCONSELHO_SOLIC%type default NULL,
  pATD_ATE_FL_STATUS IN TB_ATD_ATE_ATENDIMENTO.ATD_ATE_FL_STATUS%type,
  pTIS_CPR_CD_CONSELHOPROF_SOLIC IN TB_ATD_ATE_ATENDIMENTO.TIS_CPR_CD_CONSELHOPROF_SOLIC%type default NULL,
  pATD_ATE_NR_SENHA_CHAMADA IN TB_ATD_ATE_ATENDIMENTO.ATD_ATE_NR_SENHA_CHAMADA%type default NULL,
  pATD_ATE_FL_LIBERA_EMISSAO IN TB_ATD_ATE_ATENDIMENTO.ATD_ATE_FL_LIBERA_EMISSAO%type DEFAULT NULL,
  pATD_ATE_DS_MOTIVO_CANCELA IN TB_ATD_ATE_ATENDIMENTO.ATD_ATE_DS_MOTIVO_CANCELA%type DEFAULT NULL,
  pTIS_CBO_CD_CBOS_SOLIC IN TB_ATD_ATE_ATENDIMENTO.TIS_CBO_CD_CBOS_SOLIC%type DEFAULT NULL,
  pATD_ATE_FL_SUSPEITA_COVID19 IN TB_ATD_ATE_ATENDIMENTO.ATD_ATE_FL_SUSPEITA_COVID19%type DEFAULT NULL,
  pATD_ATE_FL_PEDIATRIA_ONCO IN TB_ATD_ATE_ATENDIMENTO.ATD_ATE_FL_PEDIATRIA_ONCO%type DEFAULT NULL
) 
IS
/********************************************************************
*    Procedure: PRC_ATD_ATENDIMENTO_R_I
* 
*    Data Criacao:  data da  cria√ß√£o   Por: Nome do Analista
*    Data Alteracao:  13/10/2010  Por: Pedro
*    AlteraÁ„o: pTIS_CPR_CD_CONSELHOPROF_SOLIC
*
*    Data Alteracao:  21/10/2014  Por: Andrea Cazuca
*    Alteracao:  Inclus„o do campo TIS_CBO_CD_CBOS_SOLIC
*
*    Funcao: Descri√ß√£o da funcionalidade da Stored Procedure
*
*******************************************************************/  

nrAtendimento NUMBER;
  
BEGIN

  IF pATD_ATE_ID IS NULL THEN
    SELECT SEQATEND.NEXTVAL INTO nrAtendimento FROM DUAL;
        
    INSERT INTO TB_ATD_ATE_ATENDIMENTO
    (
      ATD_ATE_TP_PACIENTE,
      ATD_ATE_ID,
      ATD_ATE_DT_ATENDIMENTO,
      ATD_ATE_HR_ATENDIMENTO,
      CODPAD,
      ATD_ATE_FL_CARATER_SOLIC,
      ATD_ATE_DS_INDCLINICA,
      ATD_ATE_FL_INDIC_RN_OK,
      ATD_ATE_FL_RETORNO_OK,
      ATD_ATE_DS_OBSERVACAO,
      ATD_ATE_DT_ULTIMA_ATUALIZACAO,
      SEG_USU_ID_USUARIO,
      TIS_TSC_CD_TIPOSAIDACONSULTA,
      CAD_LAT_ID_LOCAL_ATENDIMENTO,
      CAD_CID_CD_CID10,
      TIS_TAT_CD_TPATENDIMENTO,
      TIS_IAC_CD_INDACIDENTE,
      CAD_UNI_ID_UNIDADE,
      TIS_CBO_CD_CBOS,
      CAD_SET_ID,
      CAD_UNI_ID_UNID_PROC,
      CODCLI,
      CAD_PRO_ID_PROF_EXEC,
      ATD_ATE_NR_CONSELHO_SOLIC,
      ATD_ATE_CD_UFCONSELHO_SOLIC,
      ATD_ATE_FL_STATUS,
      TIS_CPR_CD_CONSELHOPROF_SOLIC,
      ATD_ATE_NR_SENHA_CHAMADA,
      ATD_ATE_FL_LIBERA_EMISSAO,
      TIS_CBO_CD_CBOS_SOLIC,
    ATD_ATE_DS_MOTIVO_CANCELA,
    ATD_ATE_FL_SUSPEITA_COVID19,
    ATD_ATE_FL_PEDIATRIA_ONCO
    )
    VALUES
    (
      pATD_ATE_TP_PACIENTE,
      nrAtendimento,
      pATD_ATE_DT_ATENDIMENTO,
      pATD_ATE_HR_ATENDIMENTO,
      pCODPAD,
      pATD_ATE_FL_CARATER_SOLIC,
      pATD_ATE_DS_INDCLINICA,
      pATD_ATE_FL_INDIC_RN_OK,
      pATD_ATE_FL_RETORNO_OK,
      pATD_ATE_DS_OBSERVACAO,
      pATD_ATE_DT_ULTIMA_ATUALIZACAO,
      pSEG_USU_ID_USUARIO,
      pTIS_TSC_CD_TIPOSAIDACONSULTA,
      pCAD_LAT_ID_LOCAL_ATENDIMENTO,
      pCAD_CID_CD_CID10,
      pTIS_TAT_CD_TPATENDIMENTO,
      pTIS_IAC_CD_INDACIDENTE,
      pCAD_UNI_ID_UNIDADE,
      pTIS_CBO_CD_CBOS,
      pCAD_SET_ID,
      pCAD_UNI_ID_UNID_PROC,
      pCODCLI,
      pCAD_PRO_ID_PROF_EXEC,
      pATD_ATE_NR_CONSELHO_SOLIC,
      pATD_ATE_CD_UFCONSELHO_SOLIC,
      pATD_ATE_FL_STATUS,
      pTIS_CPR_CD_CONSELHOPROF_SOLIC,
      pATD_ATE_NR_SENHA_CHAMADA,
      pATD_ATE_FL_LIBERA_EMISSAO,
      pTIS_CBO_CD_CBOS_SOLIC,
    pATD_ATE_DS_MOTIVO_CANCELA,
    pATD_ATE_FL_SUSPEITA_COVID19,
    pATD_ATE_FL_PEDIATRIA_ONCO
    );
     pNewIdt := nrAtendimento;
     
  ELSE
  
    INSERT INTO TB_ATD_ATE_ATENDIMENTO
       (
           ATD_ATE_TP_PACIENTE,
           ATD_ATE_ID,
           ATD_ATE_DT_ATENDIMENTO,
           ATD_ATE_HR_ATENDIMENTO,
           CODPAD,
           ATD_ATE_FL_CARATER_SOLIC,
           ATD_ATE_DS_INDCLINICA,
           ATD_ATE_FL_INDIC_RN_OK,
           ATD_ATE_FL_RETORNO_OK,
           ATD_ATE_DS_OBSERVACAO,
           ATD_ATE_DT_ULTIMA_ATUALIZACAO,
           SEG_USU_ID_USUARIO,
           TIS_TSC_CD_TIPOSAIDACONSULTA,
           CAD_LAT_ID_LOCAL_ATENDIMENTO,
           CAD_CID_CD_CID10,
           TIS_TAT_CD_TPATENDIMENTO,
           TIS_IAC_CD_INDACIDENTE,
           CAD_UNI_ID_UNIDADE,
           TIS_CBO_CD_CBOS,
           CAD_SET_ID,
           CAD_UNI_ID_UNID_PROC,
           CODCLI,
           CAD_PRO_ID_PROF_EXEC,
           ATD_ATE_NR_CONSELHO_SOLIC,
           ATD_ATE_CD_UFCONSELHO_SOLIC,
           ATD_ATE_FL_STATUS,
           TIS_CPR_CD_CONSELHOPROF_SOLIC,
           ATD_ATE_NR_SENHA_CHAMADA,
           TIS_CBO_CD_CBOS_SOLIC,
       ATD_ATE_DS_MOTIVO_CANCELA,
       ATD_ATE_FL_PEDIATRIA_ONCO,
       ATD_ATE_FL_SUSPEITA_COVID19
       )
       VALUES
       (
           pATD_ATE_TP_PACIENTE,
           pATD_ATE_ID,
           pATD_ATE_DT_ATENDIMENTO,
           pATD_ATE_HR_ATENDIMENTO,
           pCODPAD,
           pATD_ATE_FL_CARATER_SOLIC,
           pATD_ATE_DS_INDCLINICA,
           pATD_ATE_FL_INDIC_RN_OK,
           pATD_ATE_FL_RETORNO_OK,
           pATD_ATE_DS_OBSERVACAO,
           sysdate,
           pSEG_USU_ID_USUARIO,
           pTIS_TSC_CD_TIPOSAIDACONSULTA,
           pCAD_LAT_ID_LOCAL_ATENDIMENTO,
           pCAD_CID_CD_CID10,
           pTIS_TAT_CD_TPATENDIMENTO,
           pTIS_IAC_CD_INDACIDENTE,
           pCAD_UNI_ID_UNIDADE,
           pTIS_CBO_CD_CBOS,
           pCAD_SET_ID,
           pCAD_UNI_ID_UNID_PROC,
           pCODCLI,
           pCAD_PRO_ID_PROF_EXEC,
           pATD_ATE_NR_CONSELHO_SOLIC,
           pATD_ATE_CD_UFCONSELHO_SOLIC,
           pATD_ATE_FL_STATUS,
           pTIS_CPR_CD_CONSELHOPROF_SOLIC,
           pATD_ATE_NR_SENHA_CHAMADA,
           pTIS_CBO_CD_CBOS_SOLIC,
       pATD_ATE_DS_MOTIVO_CANCELA,
       pATD_ATE_FL_PEDIATRIA_ONCO,
       pATD_ATE_FL_SUSPEITA_COVID19
       );
       pNewIdt := pATD_ATE_ID;
    END IF; 
END PRC_ATD_ATENDIMENTO_R_I;
/
