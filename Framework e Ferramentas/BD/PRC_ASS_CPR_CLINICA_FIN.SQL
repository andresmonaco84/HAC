CREATE OR REPLACE PROCEDURE PRC_ASS_CPR_CLINICA_FIN
(
  pASS_CPR_DT_FIM_VIGENCIA       IN TB_ASS_CPR_CLINICA_PROF.ASS_CPR_DT_FIM_VIGENCIA%TYPE,
  pCAD_CLC_ID                    IN TB_ASS_CPR_CLINICA_PROF.CAD_CLC_ID%TYPE,
  pCAD_PRO_ID_PROFISSIONAL       IN TB_ASS_CPR_CLINICA_PROF.CAD_PRO_ID_PROFISSIONAL%TYPE,
  pASS_CPR_DT_ULTIMA_ATUALIZACAO IN TB_ASS_CPR_CLINICA_PROF.ASS_CPR_DT_ULTIMA_ATUALIZACAO%TYPE,
  pSEG_USU_ID_USUARIO            IN TB_ASS_CPR_CLINICA_PROF.SEG_USU_ID_USUARIO%TYPE,
  pASS_CPR_ID                    IN TB_ASS_CPR_CLINICA_PROF.ASS_CPR_ID%TYPE
) IS

BEGIN
  UPDATE TB_ASS_CPR_CLINICA_PROF CPR
     SET CPR.ASS_CPR_DT_FIM_VIGENCIA       = pASS_CPR_DT_FIM_VIGENCIA,
         CPR.ASS_CPR_DT_ULTIMA_ATUALIZACAO = pASS_CPR_DT_ULTIMA_ATUALIZACAO,
         CPR.SEG_USU_ID_USUARIO            = pSEG_USU_ID_USUARIO
   WHERE CPR.CAD_CLC_ID = pCAD_CLC_ID
     AND CPR.CAD_PRO_ID_PROFISSIONAL = pCAD_PRO_ID_PROFISSIONAL
     AND CPR.ASS_CPR_ID = pASS_CPR_ID
     AND CPR.ASS_CPR_DT_FIM_VIGENCIA IS NULL;
END PRC_ASS_CPR_CLINICA_FIN;