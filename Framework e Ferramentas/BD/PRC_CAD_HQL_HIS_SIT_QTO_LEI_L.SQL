create or replace procedure PRC_CAD_HQL_HIS_SIT_QTO_LEI_L
(
     pCAD_HQL_ID IN TB_CAD_HQL_HIS_SIT_QTO_LEITO.CAD_HQL_ID%type DEFAULT NULL,
     pCAD_QLE_ID IN TB_CAD_HQL_HIS_SIT_QTO_LEITO.CAD_QLE_ID%type DEFAULT NULL,
     pCAD_SQL_CD_SIT_QUARTO_LEITO IN TB_CAD_HQL_HIS_SIT_QTO_LEITO.CAD_SQL_CD_SIT_QUARTO_LEITO%type DEFAULT NULL,
     pCAD_HQL_DT_HR_INICIO IN TB_CAD_HQL_HIS_SIT_QTO_LEITO.CAD_HQL_DT_HR_INICIO%type DEFAULT NULL,
     pCAD_HQL_DT_HR_FIM IN TB_CAD_HQL_HIS_SIT_QTO_LEITO.CAD_HQL_DT_HR_FIM%type DEFAULT NULL,
     pSEG_USU_ID_USU_REG_INICIO IN TB_CAD_HQL_HIS_SIT_QTO_LEITO.SEG_USU_ID_USU_REG_INICIO%type DEFAULT NULL,
     pSEG_USU_ID_USU_REG_FIM IN TB_CAD_HQL_HIS_SIT_QTO_LEITO.SEG_USU_ID_USU_REG_FIM%type DEFAULT NULL,
	 pCAD_HQL_DS_OBSERVACAO IN TB_CAD_HQL_HIS_SIT_QTO_LEITO.CAD_HQL_DS_OBSERVACAO%TYPE DEFAULT NULL,
     io_cursor OUT PKG_CURSOR.t_cursor
)
is
/********************************************************************
*    Procedure: PRC_CAD_HQL_HIS_SIT_QTO_LEI_L
*
*    Data Criacao: 	data da  criação   Por: Nome do Analista
*    Data Alteracao:	data da alteração  Por: Nome do Analista
*
*    Funcao: Descrição da funcionalidade da Stored Procedure
*
*******************************************************************/
 v_cursor PKG_CURSOR.t_cursor;
  V_WHERE  varchar2(5000);
  V_SELECT  varchar2(5000);
begin
  V_WHERE := NULL;
  IF pCAD_HQL_ID IS NOT NULL THEN 
	V_WHERE:= V_WHERE || ' AND CAD_HQL_ID = ' || pCAD_HQL_ID; 
  END IF;
  IF pCAD_QLE_ID IS NOT NULL THEN 
	V_WHERE:= V_WHERE || ' AND CAD_QLE_ID = ' || pCAD_QLE_ID; 
  END IF;
  IF pCAD_SQL_CD_SIT_QUARTO_LEITO IS NOT NULL THEN 
	V_WHERE:= V_WHERE || ' AND CAD_SQL_CD_SIT_QUARTO_LEITO = ' || pCAD_SQL_CD_SIT_QUARTO_LEITO; 
  END IF;
  IF pCAD_HQL_DT_HR_INICIO IS NOT NULL THEN 
    V_WHERE:= V_WHERE || ' AND CAD_HQL_DT_HR_INICIO = ' || CHR(39) || pCAD_HQL_DT_HR_INICIO || CHR(39); 
  END IF;
  IF pCAD_HQL_DT_HR_FIM IS NOT NULL THEN 
    V_WHERE:= V_WHERE || ' AND CAD_HQL_DT_HR_FIM = ' || CHR(39) || pCAD_HQL_DT_HR_FIM || CHR(39); 
  END IF;
  IF pSEG_USU_ID_USU_REG_INICIO IS NOT NULL THEN 
    V_WHERE:= V_WHERE || ' AND SEG_USU_ID_USU_REG_INICIO = ' || pSEG_USU_ID_USU_REG_INICIO; 
  END IF;
  IF pSEG_USU_ID_USU_REG_FIM IS NOT NULL THEN 
    V_WHERE:= V_WHERE || ' AND SEG_USU_ID_USU_REG_FIM = ' || pSEG_USU_ID_USU_REG_FIM; 
  END IF;
  IF pCAD_HQL_DS_OBSERVACAO IS NOT NULL THEN 
    V_WHERE:= V_WHERE || ' AND CAD_HQL_DS_OBSERVACAO = ' || pCAD_HQL_DS_OBSERVACAO; 
  END IF;

   V_SELECT := ' SELECT CAD_HQL_ID,
					    CAD_QLE_ID,
					    CAD_SQL_CD_SIT_QUARTO_LEITO,
					    CAD_HQL_DT_HR_INICIO,
					    CAD_HQL_DT_HR_FIM,
					    SEG_USU_ID_USU_REG_INICIO,
					    SEG_USU_ID_USU_REG_FIM,
						CAD_HQL_DS_OBSERVACAO
				   FROM TB_CAD_HQL_HIS_SIT_QTO_LEITO
			   	  WHERE null is null  ' ;

OPEN v_cursor FOR
  V_SELECT || V_WHERE ;
  io_cursor := v_cursor;
end PRC_CAD_HQL_HIS_SIT_QTO_LEI_L;