create or replace procedure PRC_ATD_MPM_MED_PRESC_MED_L
(
     pATD_MPM_ID IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_ID%type DEFAULT NULL,
     pATD_PME_ID IN TB_ATD_MPM_MED_PRESC_MED.ATD_PME_ID%type DEFAULT NULL,
     pCAD_MTMD_ID IN TB_ATD_MPM_MED_PRESC_MED.CAD_MTMD_ID%type DEFAULT NULL,
     pATD_MPM_DS_DOSE IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_DS_DOSE%type DEFAULT NULL,
     pATD_MPM_DS_VIA IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_DS_VIA%type DEFAULT NULL,
     pATD_MPM_DS_INTERVALO IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_DS_INTERVALO%type DEFAULT NULL,
     pATD_MPM_DS_OBSERVACAO IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_DS_OBSERVACAO%type DEFAULT NULL,
     pATD_MPM_DT_HORA_CRIACAO IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_DT_HORA_CRIACAO%type DEFAULT NULL,
     pATD_MPM_ID_USU_CRIACAO IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_ID_USU_CRIACAO%type DEFAULT NULL,
     pATD_MPM_DT_ULT_ATUALIZ IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_DT_ULT_ATUALIZ%type DEFAULT NULL,
     pATD_MPM_ID_USU_ULT_ATUALIZ IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_ID_USU_ULT_ATUALIZ%type DEFAULT NULL,
     pATD_MPM_DS_MEDICAMENTO IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_DS_MEDICAMENTO%type DEFAULT NULL,
     pINT_PPR_ID IN TB_ATD_MPM_MED_PRESC_MED.INT_PPR_ID%type DEFAULT NULL,
     pATD_MPM_CD_VIA IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_CD_VIA%type DEFAULT NULL,
     pATD_MPM_FL_IMEDIATO IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_FL_IMEDIATO%type DEFAULT NULL,
     pATD_MPM_DT_HORA_REALIZ IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_DT_HORA_REALIZ%type DEFAULT NULL,
     pATD_MPM_FL_PEDIDO_EST IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_FL_PEDIDO_EST%type DEFAULT NULL,
     pATD_MPM_QT_PEDIDO IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_QT_PEDIDO%type DEFAULT NULL,
     pATD_MPM_DILUENTE IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_DILUENTE%type DEFAULT NULL,
     pATD_MPM_COMPLEMENTO IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_COMPLEMENTO%type DEFAULT NULL,
     pATD_MPM_FORMAFARMAC IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_FORMAFARMAC%type DEFAULT NULL,
     pATD_MPM_ID_PAI IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_ID_PAI%type DEFAULT NULL,
     pATD_MPM_NOME_PACIENTE IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_NOME_PACIENTE%type DEFAULT NULL,
      pATD_MPM_TIPO IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_TIPO%type default NULL  ,
      pATD_MPM_DOSE_ADM IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_DOSE_ADM%type DEFAULT NULL,
      pATD_MPM_FL_IMPRESSO IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_FL_IMPRESSO%type DEFAULT NULL,
      pATD_MPM_JUSTIFICATIVA IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_JUSTIFICATIVA%type DEFAULT NULL,
      pATD_MPM_STATUS IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_STATUS%type DEFAULT NULL,
           pATD_MPM_APRAZAMENTO IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_APRAZAMENTO%type DEFAULT NULL,
            pATD_MPM_TP_CONDICIONAL IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_TP_CONDICIONAL%type DEFAULT NULL,
            pATD_MPM_FL_PROFILATICO_ORIGEM IN TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_FL_PROFILATICO_ORIGEM%type DEFAULT NULL,
pATD_MPM_DT_INICIO in TB_ATD_MPM_MED_PRESC_MED.ATD_MPM_DT_INICIO            %TYPE DEFAULT NULL,
     io_cursor OUT PKG_CURSOR.t_cursor
)
is
/********************************************************************
*    Procedure: PRC_ATD_MPM_MED_PRESC_MED_L
*
*    Data Criacao:  data da  cria??o   Por: Nome do Analista
*    Data Alteracao:  data da altera??o  Por: Nome do Analista
*
*    Funcao: Descri??o da funcionalidade da Stored Procedure
*
*******************************************************************/
 v_cursor PKG_CURSOR.t_cursor;
  V_WHERE  varchar2(5000);
  V_SELECT  varchar2(5000);
  V_ORDER  varchar2(500);
begin
  V_WHERE := NULL;

  IF pATD_MPM_ID IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_ID = ' || pATD_MPM_ID; END IF;
IF pATD_PME_ID IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PME_ID = ' || pATD_PME_ID; END IF;
IF pCAD_MTMD_ID IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_MTMD_ID = ' || pCAD_MTMD_ID; END IF;
IF pATD_MPM_DS_DOSE IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_DS_DOSE = ' || CHR(39) || pATD_MPM_DS_DOSE || CHR(39); END IF;
IF pATD_MPM_DS_VIA IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_DS_VIA = ' || CHR(39) || pATD_MPM_DS_VIA || CHR(39); END IF;
IF pATD_MPM_DS_INTERVALO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_DS_INTERVALO = ' || CHR(39) || pATD_MPM_DS_INTERVALO || CHR(39); END IF;
IF pATD_MPM_DS_OBSERVACAO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_DS_OBSERVACAO = ' || CHR(39) || pATD_MPM_DS_OBSERVACAO || CHR(39); END IF;
IF pATD_MPM_DT_HORA_CRIACAO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_DT_HORA_CRIACAO = ' || CHR(39) || pATD_MPM_DT_HORA_CRIACAO || CHR(39); END IF;
IF pATD_MPM_ID_USU_CRIACAO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_ID_USU_CRIACAO = ' || pATD_MPM_ID_USU_CRIACAO; END IF;
IF pATD_MPM_DT_ULT_ATUALIZ IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_DT_ULT_ATUALIZ = ' || CHR(39) || pATD_MPM_DT_ULT_ATUALIZ || CHR(39); END IF;
IF pATD_MPM_ID_USU_ULT_ATUALIZ IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_ID_USU_ULT_ATUALIZ = ' || pATD_MPM_ID_USU_ULT_ATUALIZ; END IF;
IF pATD_MPM_DS_MEDICAMENTO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_DS_MEDICAMENTO = ' || CHR(39) || pATD_MPM_DS_MEDICAMENTO || CHR(39); END IF;
IF pINT_PPR_ID IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND INT_PPR_ID = ' || pINT_PPR_ID; END IF;
IF pATD_MPM_CD_VIA IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_CD_VIA = ' || CHR(39) || pATD_MPM_CD_VIA || CHR(39); END IF;
IF pATD_MPM_FL_IMEDIATO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_FL_IMEDIATO = ' || CHR(39) || pATD_MPM_FL_IMEDIATO || CHR(39); END IF;
IF pATD_MPM_DT_HORA_REALIZ IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_DT_HORA_REALIZ = ' || CHR(39) || pATD_MPM_DT_HORA_REALIZ || CHR(39); END IF;
IF pATD_MPM_FL_PEDIDO_EST IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_FL_PEDIDO_EST = ' || CHR(39) || pATD_MPM_FL_PEDIDO_EST || CHR(39); END IF;
IF pATD_MPM_QT_PEDIDO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_QT_PEDIDO = ' || pATD_MPM_QT_PEDIDO; END IF;
IF pATD_MPM_DILUENTE IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_DILUENTE = ' || CHR(39) || pATD_MPM_DILUENTE || CHR(39); END IF;
IF pATD_MPM_COMPLEMENTO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_COMPLEMENTO = ' || CHR(39) || pATD_MPM_COMPLEMENTO || CHR(39); END IF;
IF pATD_MPM_FORMAFARMAC IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_FORMAFARMAC = ' || CHR(39) || pATD_MPM_FORMAFARMAC || CHR(39); END IF;
IF pATD_MPM_ID_PAI IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_ID_PAI = ' || pATD_MPM_ID_PAI; END IF;
IF pATD_MPM_NOME_PACIENTE IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_NOME_PACIENTE = ' || CHR(39) || pATD_MPM_NOME_PACIENTE || CHR(39); END IF;
 IF pATD_MPM_TIPO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_TIPO = ' || CHR(39) || pATD_MPM_TIPO || CHR(39); END IF;
 IF pATD_MPM_DOSE_ADM IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_DOSE_ADM = ' || CHR(39) || pATD_MPM_DOSE_ADM || CHR(39); END IF;
 IF pATD_MPM_FL_IMPRESSO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_FL_IMPRESSO = ' || CHR(39) || pATD_MPM_FL_IMPRESSO || CHR(39); END IF;
 IF pATD_MPM_JUSTIFICATIVA IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_JUSTIFICATIVA = ' || CHR(39) || pATD_MPM_JUSTIFICATIVA || CHR(39); END IF;
 IF pATD_MPM_STATUS IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_STATUS = ' || CHR(39) || pATD_MPM_STATUS || CHR(39); END IF;
 IF pATD_MPM_APRAZAMENTO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_APRAZAMENTO = ' || CHR(39) || pATD_MPM_APRAZAMENTO || CHR(39); END IF;
 IF pATD_MPM_TP_CONDICIONAL IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_TP_CONDICIONAL = ' || CHR(39) || pATD_MPM_TP_CONDICIONAL || CHR(39); END IF;
  IF pATD_MPM_FL_PROFILATICO_ORIGEM IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_FL_PROFILATICO_ORIGEM = ' || CHR(39) || pATD_MPM_FL_PROFILATICO_ORIGEM || CHR(39); END IF;
 
 IF pATD_MPM_DT_INICIO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_MPM_DT_INICIO = ' || CHR(39) || pATD_MPM_DT_INICIO || CHR(39); END IF;
 
 
   V_SELECT := '
SELECT
       ATD_MPM_ID,
       ATD_PME_ID,
       CAD_MTMD_ID,
       ATD_MPM_DS_DOSE,
       ATD_MPM_DS_VIA,
       ATD_MPM_DS_INTERVALO,
       ATD_MPM_DS_OBSERVACAO,
       ATD_MPM_DT_HORA_CRIACAO,
       ATD_MPM_ID_USU_CRIACAO,
       ATD_MPM_DT_ULT_ATUALIZ,
       ATD_MPM_ID_USU_ULT_ATUALIZ,
       ATD_MPM_DS_MEDICAMENTO,
       INT_PPR_ID,
       ATD_MPM_CD_VIA,
       ATD_MPM_FL_IMEDIATO,
       ATD_MPM_DT_HORA_REALIZ,
       ATD_MPM_FL_PEDIDO_EST,
       ATD_MPM_QT_PEDIDO,
       ATD_MPM_DILUENTE,
       ATD_MPM_COMPLEMENTO,
       ATD_MPM_FORMAFARMAC,
       ATD_MPM_ID_PAI,
       ATD_MPM_NOME_PACIENTE,
       ATD_MPM_TIPO,
       ATD_MPM_DOSE_ADM,
       ATD_MPM_FL_IMPRESSO,
       ATD_MPM_JUSTIFICATIVA,
       ATD_MPM_STATUS,
       ATD_MPM_APRAZAMENTO,
       ATD_MPM_TP_CONDICIONAL,
       ATD_MPM_FL_PROFILATICO_ORIGEM,
       ATD_MPM_DT_INICIO

FROM TB_ATD_MPM_MED_PRESC_MED
WHERE null is null  '    ;
  V_ORDER:=  ' ORDER BY  TO_NUMBER(DECODE(ATD_MPM_CD_VIA,''19'',-10,''20'',-9,''13'',-8,''25'',-7,ATD_MPM_CD_VIA)), ATD_MPM_DT_HORA_CRIACAO ASC';
OPEN v_cursor FOR
  V_SELECT || V_WHERE || V_ORDER;
  io_cursor := v_cursor;
end PRC_ATD_MPM_MED_PRESC_MED_L;
