CREATE OR REPLACE PROCEDURE "PRC_CAD_CLC_CLINICA_CRED_RMT_S"
  (
     pCAD_CLC_ID IN TB_CAD_CLC_CLINICA_CREDENCIADA.CAD_CLC_ID%type DEFAULT NULL,
     pCAD_CLC_DT_INI_VIGENCIA IN TB_CAD_CLC_CLINICA_CREDENCIADA.CAD_CLC_DT_INI_VIGENCIA%type DEFAULT NULL,
     pCAD_CLC_DT_FIM_VIGENCIA IN TB_CAD_CLC_CLINICA_CREDENCIADA.CAD_CLC_DT_FIM_VIGENCIA%type DEFAULT NULL,
     pCAD_PES_ID_PESSOA IN TB_CAD_CLC_CLINICA_CREDENCIADA.CAD_PES_ID_PESSOA%type DEFAULT NULL,
     pCAD_PES_NR_CNPJ_CPF IN TB_CAD_PES_PESSOA.CAD_PES_NR_CNPJ_CPF%type DEFAULT NULL,
     pCAD_PES_NM_RAZAOSOCIAL IN TB_CAD_PES_PESSOA.CAD_PES_NM_RAZAOSOCIAL%type DEFAULT NULL,
     pCAD_PES_NM_PESSOA IN TB_CAD_PES_PESSOA.CAD_PES_NM_PESSOA%type DEFAULT NULL,
     pCAD_CLC_CD_CLINICA IN TB_CAD_CLC_CLINICA_CREDENCIADA.CAD_CLC_CD_CLINICA%type DEFAULT NULL,
     pCAD_CLC_FL_STATUS IN TB_CAD_CLC_CLINICA_CREDENCIADA.CAD_CLC_FL_STATUS%type DEFAULT NULL,
     pCAD_CLC_DT_ULTIMA_ATUALIZACAO IN TB_CAD_CLC_CLINICA_CREDENCIADA.CAD_CLC_DT_ULTIMA_ATUALIZACAO%type DEFAULT NULL,
     pSEG_USU_ID_USUARIO IN TB_CAD_CLC_CLINICA_CREDENCIADA.SEG_USU_ID_USUARIO%type DEFAULT NULL,
     pCAD_CLC_DS_RESUMIDA IN TB_CAD_CLC_CLINICA_CREDENCIADA.CAD_CLC_DS_RESUMIDA%type DEFAULT NULL,
     pCAD_CLC_FL_MOVIMENTAPACINT_OK IN TB_CAD_CLC_CLINICA_CREDENCIADA.CAD_CLC_FL_MOVIMENTAPACINT_OK%type DEFAULT NULL,
     pCAD_CLC_FL_UTILIZA_LIBERACAO IN TB_CAD_CLC_CLINICA_CREDENCIADA.CAD_CLC_FL_UTILIZA_LIBERACAO%type DEFAULT NULL,
     pCAD_CLC_DS_DESCRICAO IN TB_CAD_CLC_CLINICA_CREDENCIADA.CAD_CLC_DS_DESCRICAO%type DEFAULT NULL,
     pCAD_CLC_CT_EMPRESA IN TB_CAD_CLC_CLINICA_CREDENCIADA.CAD_CLC_CT_EMPRESA%type DEFAULT NULL,
     io_cursor OUT PKG_CURSOR.t_cursor
  )
  is
  /********************************************************************
  *    Procedure: PRC_CAD_CLC_CLINICA_CRED_RMT_S
  *
  *    Data Criacao: 	data da  criacao   Por: Nome do Analista
  *    Data Alteracao:	data da alteracao  Por: Nome do Analista
  *
  *    Funcao: Descricao da funcionalidade da Stored Procedure
  *
  *    Data Alteracao:	04/08/2011  Por: Davi S. M. dos Reis
  *    Alteração: Inclusao do campo CAD_CLC_FL_UTILIZA_LIBERACAO e CAD_CLC_DS_DESCRICAO
  *
  *    Data Alteracao:	01º/03/2012  Por: Davi S. M. dos Reis
  *    Alteração: Inclusao dos campos pCAD_PES_NR_CNPJ_CPF, pCAD_PES_NM_RAZAOSOCIAL e 
  *               pCAD_PES_NM_PESSOA na pesquisa
  *
  *******************************************************************/
  v_cursor PKG_CURSOR.t_cursor;
  begin
    OPEN v_cursor FOR
    SELECT
       CLC.CAD_CLC_ID,
       CLC.CAD_CLC_DT_INI_VIGENCIA,
       CLC.CAD_CLC_DT_FIM_VIGENCIA,
       CLC.CAD_PES_ID_PESSOA,
       CLC.CAD_CLC_CD_CLINICA,
       CLC.CAD_CLC_FL_STATUS,
       CLC.CAD_CLC_DT_ULTIMA_ATUALIZACAO,
       CLC.SEG_USU_ID_USUARIO,
       CLC.CAD_CLC_DS_RESUMIDA,
       CLC.CAD_CLC_FL_MOVIMENTAPACINT_OK,
       CLC.CAD_CLC_FL_UTILIZA_LIBERACAO,
       CLC.CAD_CLC_DS_DESCRICAO,
       CLC.CAD_CLC_CT_EMPRESA,
       PES.CAD_PES_NR_CNPJ_CPF,
       PES.CAD_PES_FL_JURIDICA_OK,
       PES.CAD_PES_NM_PESSOA,
       PES.CAD_PES_NM_RAZAOSOCIAL,
       PES.CAD_PES_CD_INSCR_ESTAD,
       PES.CAD_PES_CD_INSCR_MUNIC
    FROM TB_CAD_CLC_CLINICA_CREDENCIADA CLC,
         TB_CAD_PES_PESSOA PES
    WHERE
        (pCAD_CLC_ID is null OR CLC.CAD_CLC_ID = pCAD_CLC_ID) AND
        (pCAD_CLC_DT_INI_VIGENCIA is null OR CLC.CAD_CLC_DT_INI_VIGENCIA = pCAD_CLC_DT_INI_VIGENCIA) AND
        (pCAD_CLC_DT_FIM_VIGENCIA is null OR CLC.CAD_CLC_DT_FIM_VIGENCIA = pCAD_CLC_DT_FIM_VIGENCIA) AND
        (pCAD_PES_ID_PESSOA is null OR CLC.CAD_PES_ID_PESSOA = pCAD_PES_ID_PESSOA) AND
        (pCAD_PES_NR_CNPJ_CPF is null OR PES.CAD_PES_NR_CNPJ_CPF = pCAD_PES_NR_CNPJ_CPF) AND
        (pCAD_PES_NM_RAZAOSOCIAL is null OR PES.CAD_PES_NM_RAZAOSOCIAL LIKE '%' || UPPER(pCAD_PES_NM_RAZAOSOCIAL) || '%') AND
        (pCAD_PES_NM_PESSOA is null OR PES.CAD_PES_NM_PESSOA LIKE '%' || UPPER(pCAD_PES_NM_PESSOA) || '%') AND
        (pCAD_CLC_CD_CLINICA is null OR CLC.CAD_CLC_CD_CLINICA = pCAD_CLC_CD_CLINICA) AND
        (pCAD_CLC_FL_STATUS is null OR CLC.CAD_CLC_FL_STATUS = pCAD_CLC_FL_STATUS) AND
        (pCAD_CLC_DT_ULTIMA_ATUALIZACAO is null OR CLC.CAD_CLC_DT_ULTIMA_ATUALIZACAO = pCAD_CLC_DT_ULTIMA_ATUALIZACAO) AND
        (pSEG_USU_ID_USUARIO is null OR CLC.SEG_USU_ID_USUARIO = pSEG_USU_ID_USUARIO) AND
        (pCAD_CLC_DS_RESUMIDA is null OR CLC.CAD_CLC_DS_RESUMIDA = pCAD_CLC_DS_RESUMIDA) AND
        (pCAD_CLC_FL_MOVIMENTAPACINT_OK is null OR CLC.CAD_CLC_FL_MOVIMENTAPACINT_OK = pCAD_CLC_FL_MOVIMENTAPACINT_OK) AND
        (pCAD_CLC_FL_UTILIZA_LIBERACAO is null OR CLC.CAD_CLC_FL_UTILIZA_LIBERACAO = pCAD_CLC_FL_UTILIZA_LIBERACAO) AND
        (pCAD_CLC_DS_DESCRICAO is null OR CLC.CAD_CLC_DS_DESCRICAO = pCAD_CLC_DS_DESCRICAO) AND
        (pCAD_CLC_CT_EMPRESA is null OR CLC.CAD_CLC_CT_EMPRESA = pCAD_CLC_CT_EMPRESA) AND        
        (CLC.CAD_PES_ID_PESSOA = PES.CAD_PES_ID_PESSOA);
    io_cursor := v_cursor;
  end PRC_CAD_CLC_CLINICA_CRED_RMT_S;
 