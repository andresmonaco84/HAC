 
--PRC_ATD_PKI_PRESCRICAO_KIT_ITEM_L
create or replace procedure PRC_ATD_PKI_PRESC_KIT_ITEM_L 
(
     pATD_PKI_ID IN TB_ATD_PKI_PRESCRICAO_KIT_ITEM.ATD_PKI_ID%type DEFAULT NULL,
     pATD_PKI_ID_PAI IN TB_ATD_PKI_PRESCRICAO_KIT_ITEM.ATD_PKI_ID_PAI%type DEFAULT NULL,
     pATD_PKT_ID IN TB_ATD_PKI_PRESCRICAO_KIT_ITEM.ATD_PKT_ID%type DEFAULT NULL,
     pATD_PKI_TIPO IN TB_ATD_PKI_PRESCRICAO_KIT_ITEM.ATD_PKI_TIPO%type DEFAULT NULL,
     pATD_PKI_SAL IN TB_ATD_PKI_PRESCRICAO_KIT_ITEM.ATD_PKI_SAL%type DEFAULT NULL,
     pATD_PKI_FORMA IN TB_ATD_PKI_PRESCRICAO_KIT_ITEM.ATD_PKI_FORMA%type DEFAULT NULL,
     pATD_PKI_APRESENTACAO IN TB_ATD_PKI_PRESCRICAO_KIT_ITEM.ATD_PKI_APRESENTACAO%type DEFAULT NULL,
     pCAD_MTMD_ID IN TB_ATD_PKI_PRESCRICAO_KIT_ITEM.CAD_MTMD_ID%type DEFAULT NULL,
     pATD_PKI_QTD IN TB_ATD_PKI_PRESCRICAO_KIT_ITEM.ATD_PKI_QTD%type DEFAULT NULL,
     pATD_PKI_ID_USU_ULT_ATUALIZ IN TB_ATD_PKI_PRESCRICAO_KIT_ITEM.ATD_PKI_ID_USU_ULT_ATUALIZ%type DEFAULT NULL,
     pATD_PKI_DT_ULT_ATUALIZ IN TB_ATD_PKI_PRESCRICAO_KIT_ITEM.ATD_PKI_DT_ULT_ATUALIZ%type DEFAULT NULL,
     pATD_PKI_VIA IN TB_ATD_PKI_PRESCRICAO_KIT_ITEM.ATD_PKI_VIA%type DEFAULT NULL,
     pATD_PKI_DOSE_ADM IN TB_ATD_PKI_PRESCRICAO_KIT_ITEM.ATD_PKI_DOSE_ADM%type DEFAULT NULL,
     pATD_PKI_INTERVALO IN TB_ATD_PKI_PRESCRICAO_KIT_ITEM.ATD_PKI_INTERVALO%type DEFAULT NULL,
     pATD_PKI_APRAZAMENTO IN TB_ATD_PKI_PRESCRICAO_KIT_ITEM.ATD_PKI_APRAZAMENTO%type DEFAULT NULL,
     pATD_PKI_OBSERVACAO IN TB_ATD_PKI_PRESCRICAO_KIT_ITEM.ATD_PKI_OBSERVACAO%type DEFAULT NULL,
     pATD_PKI_FL_IMEDIATO IN TB_ATD_PKI_PRESCRICAO_KIT_ITEM.ATD_PKI_FL_IMEDIATO%type DEFAULT NULL,
     pATD_PKI_FL_SENECESSARIO IN TB_ATD_PKI_PRESCRICAO_KIT_ITEM.ATD_PKI_FL_SENECESSARIO%type DEFAULT NULL,
     pATD_PKI_FL_ACM IN TB_ATD_PKI_PRESCRICAO_KIT_ITEM.ATD_PKI_FL_ACM%type DEFAULT NULL,
     io_cursor OUT PKG_CURSOR.t_cursor
) 
is
/********************************************************************
*    Procedure: PRC_ATD_PKI_PRESCRICAO_KIT_ITEM_L
* 
*    Data Criacao: 	data da  criação   Por: Nome do Analista
*    Data Alteracao:	data da alteração  Por: Nome do Analista
*
*    Funcao: Descrição da funcionalidade da Stored Procedure
*
*******************************************************************/
 v_cursor PKG_CURSOR.t_cursor;
  V_WHERE  varchar2(5000);
  V_SELECT  varchar2(5000);
begin
  V_WHERE := NULL;
  IF pATD_PKI_ID IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PKI_ID = ' || pATD_PKI_ID; END IF;
IF pATD_PKI_ID_PAI IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PKI_ID_PAI = ' || pATD_PKI_ID_PAI; END IF;
IF pATD_PKT_ID IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PKT_ID = ' || pATD_PKT_ID; END IF;
IF pATD_PKI_TIPO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PKI_TIPO = ' || CHR(39) || pATD_PKI_TIPO || CHR(39); END IF;
IF pATD_PKI_SAL IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PKI_SAL = ' || CHR(39) || pATD_PKI_SAL || CHR(39); END IF;
IF pATD_PKI_FORMA IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PKI_FORMA = ' || CHR(39) || pATD_PKI_FORMA || CHR(39); END IF;
IF pATD_PKI_APRESENTACAO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PKI_APRESENTACAO = ' || CHR(39) || pATD_PKI_APRESENTACAO || CHR(39); END IF;
IF pCAD_MTMD_ID IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_MTMD_ID = ' || pCAD_MTMD_ID; END IF;
IF pATD_PKI_QTD IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PKI_QTD = ' || pATD_PKI_QTD; END IF;
IF pATD_PKI_ID_USU_ULT_ATUALIZ IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PKI_ID_USU_ULT_ATUALIZ = ' || pATD_PKI_ID_USU_ULT_ATUALIZ; END IF;
IF pATD_PKI_DT_ULT_ATUALIZ IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PKI_DT_ULT_ATUALIZ = ' || CHR(39) || pATD_PKI_DT_ULT_ATUALIZ || CHR(39); END IF;
IF pATD_PKI_VIA IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PKI_VIA = ' || CHR(39) || pATD_PKI_VIA || CHR(39); END IF;
IF pATD_PKI_DOSE_ADM IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PKI_DOSE_ADM = ' || CHR(39) || pATD_PKI_DOSE_ADM || CHR(39); END IF;
IF pATD_PKI_INTERVALO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PKI_INTERVALO = ' || CHR(39) || pATD_PKI_INTERVALO || CHR(39); END IF;
IF pATD_PKI_APRAZAMENTO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PKI_APRAZAMENTO = ' || CHR(39) || pATD_PKI_APRAZAMENTO || CHR(39); END IF;
IF pATD_PKI_OBSERVACAO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PKI_OBSERVACAO = ' || CHR(39) || pATD_PKI_OBSERVACAO || CHR(39); END IF;
IF pATD_PKI_FL_IMEDIATO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PKI_FL_IMEDIATO = ' || pATD_PKI_FL_IMEDIATO; END IF;
IF pATD_PKI_FL_SENECESSARIO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PKI_FL_SENECESSARIO = ' || pATD_PKI_FL_SENECESSARIO; END IF;
IF pATD_PKI_FL_ACM IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PKI_FL_ACM = ' || pATD_PKI_FL_ACM; END IF;
 
   V_SELECT := '
SELECT	
       ATD_PKI_ID,
       ATD_PKI_ID_PAI,
       ATD_PKT_ID,
       ATD_PKI_TIPO,
       ATD_PKI_SAL,
       ATD_PKI_FORMA,
       ATD_PKI_APRESENTACAO,
       CAD_MTMD_ID,
       ATD_PKI_QTD,
       ATD_PKI_ID_USU_ULT_ATUALIZ,
       ATD_PKI_DT_ULT_ATUALIZ,
       ATD_PKI_VIA,
       ATD_PKI_DOSE_ADM,
       ATD_PKI_INTERVALO,
       ATD_PKI_APRAZAMENTO,
       ATD_PKI_OBSERVACAO,
       ATD_PKI_FL_IMEDIATO,
       ATD_PKI_FL_SENECESSARIO,
       ATD_PKI_FL_ACM
FROM TB_ATD_PKI_PRESCRICAO_KIT_ITEM
WHERE null is null  '    ;
       
OPEN v_cursor FOR
  V_SELECT || V_WHERE ;
  io_cursor := v_cursor;
end PRC_ATD_PKI_PRESC_KIT_ITEM_L;
