CREATE OR REPLACE PROCEDURE "PRC_CAD_SIM_SIMPRO_R_L"
(
     pCAD_SIM_ID IN TB_CAD_SIM_SIMPRO.CAD_SIM_ID%type DEFAULT NULL,
     pCAD_SIM_CD_SIMPRO IN TB_CAD_SIM_SIMPRO.CAD_SIM_CD_SIMPRO%type DEFAULT NULL,
     pCAD_SIM_NM_MNEMONICO IN TB_CAD_SIM_SIMPRO.CAD_SIM_NM_MNEMONICO%type DEFAULT NULL,
     pCAD_SIM_DS_PRODUTO IN TB_CAD_SIM_SIMPRO.CAD_SIM_DS_PRODUTO%type DEFAULT NULL,
     pCAD_SIM_DT_VIGENCIA IN TB_CAD_SIM_SIMPRO.CAD_SIM_DT_VIGENCIA%type DEFAULT NULL,
     pCAD_SIM_ID_IDENTIFICACAO IN TB_CAD_SIM_SIMPRO.CAD_SIM_ID_IDENTIFICACAO%type DEFAULT NULL,
     pCAD_SIM_VL_PRECO_FABRICA IN TB_CAD_SIM_SIMPRO.CAD_SIM_VL_PRECO_FABRICA%type DEFAULT NULL,
     pCAD_SIM_VL_PRECO_VENDA IN TB_CAD_SIM_SIMPRO.CAD_SIM_VL_PRECO_VENDA%type DEFAULT NULL,
     pCAD_SIM_VL_FRACAO_FABRICA IN TB_CAD_SIM_SIMPRO.CAD_SIM_VL_FRACAO_FABRICA%type DEFAULT NULL,
     pCAD_SIM_VL_FRACAO_VENDA IN TB_CAD_SIM_SIMPRO.CAD_SIM_VL_FRACAO_VENDA%type DEFAULT NULL,
     pCAD_SIM_TP_EMBALAGEM IN TB_CAD_SIM_SIMPRO.CAD_SIM_TP_EMBALAGEM%type DEFAULT NULL,
     pCAD_SIM_TP_FRACAO IN TB_CAD_SIM_SIMPRO.CAD_SIM_TP_FRACAO%type DEFAULT NULL,
     pCAD_SIM_QT_EMBALAGEM IN TB_CAD_SIM_SIMPRO.CAD_SIM_QT_EMBALAGEM%type DEFAULT NULL,
     pCAD_SIM_QT_FRACAO IN TB_CAD_SIM_SIMPRO.CAD_SIM_QT_FRACAO%type DEFAULT NULL,
     pCAD_SIM_TP_ALTERACAO IN TB_CAD_SIM_SIMPRO.CAD_SIM_TP_ALTERACAO%type DEFAULT NULL,
     pCAD_SIM_TP_FABRICANTE IN TB_CAD_SIM_SIMPRO.CAD_SIM_TP_FABRICANTE%type DEFAULT NULL,
     pCAD_SIM_ID_INTEIRO IN TB_CAD_SIM_SIMPRO.CAD_SIM_ID_INTEIRO%type DEFAULT NULL,
     pCAD_SIM_ID_FRACIONADO IN TB_CAD_SIM_SIMPRO.CAD_SIM_ID_FRACIONADO%type DEFAULT NULL,
     pCAD_SIM_QT_FRACIONADO IN TB_CAD_SIM_SIMPRO.CAD_SIM_QT_FRACIONADO%type DEFAULT NULL,
     pCAD_SIM_DT_ULTIMA_ATUALIZACAO IN TB_CAD_SIM_SIMPRO.CAD_SIM_DT_ULTIMA_ATUALIZACAO%type DEFAULT NULL,
     pSEG_USU_ID_USUARIO IN TB_CAD_SIM_SIMPRO.SEG_USU_ID_USUARIO%type DEFAULT NULL,
     pCAD_SIM_TP_MATMED IN TB_CAD_SIM_SIMPRO.CAD_SIM_TP_MATMED%type DEFAULT NULL,
     pCAD_CME_CLASSIF_MED IN TB_CAD_SIM_SIMPRO.CAD_CME_CLASSIF_MED%type DEFAULT NULL,
     pCAD_SIM_FL_RESTRITO IN TB_CAD_SIM_SIMPRO.CAD_SIM_FL_RESTRITO%type DEFAULT NULL,
     pCAD_SIM_PC_IPI IN TB_CAD_SIM_SIMPRO.CAD_SIM_PC_IPI%type DEFAULT NULL,
     pCAD_SIM_CD_ANVISA IN TB_CAD_SIM_SIMPRO.CAD_SIM_CD_ANVISA%type DEFAULT NULL,
     pCAD_SIM_IN_NOVO IN TB_CAD_SIM_SIMPRO.CAD_SIM_IN_NOVO%type DEFAULT NULL,
     pCAD_SIM_DT_CRIACAO IN TB_CAD_SIM_SIMPRO.CAD_SIM_DT_CRIACAO%type DEFAULT NULL,
	 pCAD_SIM_CD_TUSS IN TB_CAD_SIM_SIMPRO.CAD_SIM_CD_TUSS%type DEFAULT NULL,
     io_cursor OUT PKG_CURSOR.t_cursor
) 
is
/********************************************************************
*    Procedure: PRC_CAD_SIM_SIMPRO_R_L
* 
*    Data Criacao: 	data da  criac?o   Por: Nome do Analista
*    Data Alteracao:  24/07/2015  Por: Andre
*         Alteracao:  Add campo IDENT_DESCRICAO
*
*    Funcao: Lista Simpro
*******************************************************************/
 v_cursor PKG_CURSOR.t_cursor;
  V_WHERE  varchar2(5000);
  V_SELECT  varchar2(5000);
begin
  V_WHERE := NULL;
  IF pCAD_SIM_ID IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_ID = ' || pCAD_SIM_ID; END IF;
IF pCAD_SIM_CD_SIMPRO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_CD_SIMPRO = ' || CHR(39) || pCAD_SIM_CD_SIMPRO || CHR(39); END IF;
IF pCAD_SIM_NM_MNEMONICO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_NM_MNEMONICO = ' || CHR(39) || pCAD_SIM_NM_MNEMONICO || CHR(39); END IF;
IF pCAD_SIM_DS_PRODUTO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_DS_PRODUTO = ' || CHR(39) || pCAD_SIM_DS_PRODUTO || CHR(39); END IF;
IF pCAD_SIM_DT_VIGENCIA IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_DT_VIGENCIA = ' || CHR(39) || pCAD_SIM_DT_VIGENCIA || CHR(39); END IF;
IF pCAD_SIM_ID_IDENTIFICACAO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_ID_IDENTIFICACAO = ' || CHR(39) || pCAD_SIM_ID_IDENTIFICACAO || CHR(39); END IF;
IF pCAD_SIM_VL_PRECO_FABRICA IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_VL_PRECO_FABRICA = ' || pCAD_SIM_VL_PRECO_FABRICA; END IF;
IF pCAD_SIM_VL_PRECO_VENDA IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_VL_PRECO_VENDA = ' || pCAD_SIM_VL_PRECO_VENDA; END IF;
IF pCAD_SIM_VL_FRACAO_FABRICA IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_VL_FRACAO_FABRICA = ' || pCAD_SIM_VL_FRACAO_FABRICA; END IF;
IF pCAD_SIM_VL_FRACAO_VENDA IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_VL_FRACAO_VENDA = ' || pCAD_SIM_VL_FRACAO_VENDA; END IF;
IF pCAD_SIM_TP_EMBALAGEM IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_TP_EMBALAGEM = ' || CHR(39) || pCAD_SIM_TP_EMBALAGEM || CHR(39); END IF;
IF pCAD_SIM_TP_FRACAO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_TP_FRACAO = ' || CHR(39) || pCAD_SIM_TP_FRACAO || CHR(39); END IF;
IF pCAD_SIM_QT_EMBALAGEM IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_QT_EMBALAGEM = ' || pCAD_SIM_QT_EMBALAGEM; END IF;
IF pCAD_SIM_QT_FRACAO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_QT_FRACAO = ' || pCAD_SIM_QT_FRACAO; END IF;
IF pCAD_SIM_TP_ALTERACAO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_TP_ALTERACAO = ' || CHR(39) || pCAD_SIM_TP_ALTERACAO || CHR(39); END IF;
IF pCAD_SIM_TP_FABRICANTE IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_TP_FABRICANTE = ' || CHR(39) || pCAD_SIM_TP_FABRICANTE || CHR(39); END IF;
IF pCAD_SIM_ID_INTEIRO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_ID_INTEIRO = ' || CHR(39) || pCAD_SIM_ID_INTEIRO || CHR(39); END IF;
IF pCAD_SIM_ID_FRACIONADO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_ID_FRACIONADO = ' || CHR(39) || pCAD_SIM_ID_FRACIONADO || CHR(39); END IF;
IF pCAD_SIM_QT_FRACIONADO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_QT_FRACIONADO = ' || pCAD_SIM_QT_FRACIONADO; END IF;
IF pCAD_SIM_DT_ULTIMA_ATUALIZACAO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_DT_ULTIMA_ATUALIZACAO = ' || CHR(39) || pCAD_SIM_DT_ULTIMA_ATUALIZACAO || CHR(39); END IF;
IF pSEG_USU_ID_USUARIO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND SEG_USU_ID_USUARIO = ' || pSEG_USU_ID_USUARIO; END IF;
IF pCAD_SIM_TP_MATMED IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_TP_MATMED = ' || CHR(39) || pCAD_SIM_TP_MATMED || CHR(39); END IF;
IF pCAD_CME_CLASSIF_MED IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_CME_CLASSIF_MED = ' || pCAD_CME_CLASSIF_MED; END IF;
IF pCAD_SIM_FL_RESTRITO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_FL_RESTRITO = ' || CHR(39) || pCAD_SIM_FL_RESTRITO || CHR(39); END IF;
IF pCAD_SIM_PC_IPI IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_PC_IPI = ' || pCAD_SIM_PC_IPI; END IF;
IF pCAD_SIM_CD_ANVISA IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_SIM_CD_ANVISA = ' || CHR(39) || pCAD_SIM_CD_ANVISA || CHR(39); END IF;
IF pCAD_SIM_IN_NOVO IS NOT NULL THEN V_WHERE := V_WHERE || ' AND CAD_SIM_IN_NOVO = ' || CHR(39) || pCAD_SIM_IN_NOVO || CHR(39); END IF;
IF pCAD_SIM_DT_CRIACAO IS NOT NULL THEN V_WHERE := V_WHERE || ' AND CAD_SIM_DT_CRIACAO = ' || CHR(39) || pCAD_SIM_DT_CRIACAO || CHR(39); END IF;
IF pCAD_SIM_CD_TUSS IS NOT NULL THEN V_WHERE := V_WHERE || ' AND CAD_SIM_CD_TUSS = ' || CHR(39) || pCAD_SIM_CD_TUSS || CHR(39); END IF;
   V_SELECT := '
SELECT	
       CAD_SIM_ID,
       CAD_SIM_CD_SIMPRO,
       CAD_SIM_NM_MNEMONICO,
       CAD_SIM_DS_PRODUTO,
       CAD_SIM_DT_VIGENCIA,
       CAD_SIM_ID_IDENTIFICACAO,
       CAD_SIM_VL_PRECO_FABRICA,
       CAD_SIM_VL_PRECO_VENDA,
       CAD_SIM_VL_FRACAO_FABRICA,
       CAD_SIM_VL_FRACAO_VENDA,
       CAD_SIM_TP_EMBALAGEM,
       CAD_SIM_TP_FRACAO,
       CAD_SIM_QT_EMBALAGEM,
       CAD_SIM_QT_FRACAO,
       CAD_SIM_TP_ALTERACAO,
       CAD_SIM_TP_FABRICANTE,
       CAD_SIM_ID_INTEIRO,
       CAD_SIM_ID_FRACIONADO,
       CAD_SIM_QT_FRACIONADO,
       CAD_SIM_DT_ULTIMA_ATUALIZACAO,
       SEG_USU_ID_USUARIO,
       CAD_SIM_TP_MATMED,
       CAD_CME_CLASSIF_MED,
       CAD_SIM_FL_RESTRITO,
       CAD_SIM_PC_IPI,
       CAD_SIM_CD_ANVISA,
       CAD_SIM_IN_NOVO,
       CAD_SIM_DT_CRIACAO,
  	   CAD_SIM_CD_TUSS,
       CAD_SIM_ID_IDENTIFICACAO || '' - '' ||
       DECODE(CAD_SIM_ID_IDENTIFICACAO, 
              ''F'', ''Preco de Fabrica'',
              ''V'', ''Preco de Venda'',
              ''L'', ''Fora de Linha'',
              ''A'', ''Atualizacao Suspensa'',
              ''D'', ''Descontinuado'') IDENT_DESCRICAO
FROM TB_CAD_SIM_SIMPRO
WHERE null is null  '    ;
OPEN v_cursor FOR
  V_SELECT || V_WHERE ;
  io_cursor := v_cursor;
end PRC_CAD_SIM_SIMPRO_R_L;