create or replace procedure PRC_SEG_USUARIO_I
  (     
     pSEG_USU_DS_NOME IN TB_SEG_USU_USUARIO.SEG_USU_DS_NOME%type,
     pSEG_USU_DS_LOGIN IN TB_SEG_USU_USUARIO.SEG_USU_DS_LOGIN%type,
     pSEG_USU_DS_EMAIL IN TB_SEG_USU_USUARIO.SEG_USU_DS_EMAIL%type default NULL,
     pSEG_USU_CD_PASSWORD IN TB_SEG_USU_USUARIO.SEG_USU_CD_PASSWORD%type default NULL,
     pSEG_USU_CD_MATRICULA IN TB_SEG_USU_USUARIO.SEG_USU_CD_MATRICULA%type default NULL,
     pSEG_USU_DS_TELEFONE IN TB_SEG_USU_USUARIO.SEG_USU_DS_TELEFONE%type default NULL,
     pSEG_USU_DS_RAMAL IN TB_SEG_USU_USUARIO.SEG_USU_DS_RAMAL%type default NULL,
     pSEG_USU_FL_TROCAR_SENHA_OK IN TB_SEG_USU_USUARIO.SEG_USU_FL_TROCAR_SENHA_OK%type default NULL,
     pSEG_USU_FL_SENHA_NAO_EXPIRA IN TB_SEG_USU_USUARIO.SEG_USU_FL_SENHA_NAO_EXPIRA_OK%type default NULL,
     pSEG_USU_DT_EXPIRACAO IN TB_SEG_USU_USUARIO.SEG_USU_DT_EXPIRACAO%type default NULL,
     pSEG_USU_FL_STATUS IN TB_SEG_USU_USUARIO.SEG_USU_FL_STATUS%type default NULL,
     pSEG_USU_FL_RESPONS_PERFIL_OK IN TB_SEG_USU_USUARIO.SEG_USU_FL_RESPONS_PERFIL_OK%type,
     pSEG_USU_QT_LOGIN_INVALIDO IN TB_SEG_USU_USUARIO.SEG_USU_QT_LOGIN_INVALIDO%type default NULL,     
     pSEG_USU_DT_LOGIN_INVALIDO IN TB_SEG_USU_USUARIO.SEG_USU_DT_LOGIN_INVALIDO%type default NULL,
     pSEG_USU_ID_ATUALIZADO_POR IN TB_SEG_USU_USUARIO.SEG_USU_ID_ATUALIZADO_POR%type default NULL,
     pSEG_USU_TP_INTER_EXTER IN TB_SEG_USU_USUARIO.SEG_USU_TP_INTER_EXTER%type,
     pSEG_USU_DS_CARGO IN TB_SEG_USU_USUARIO.SEG_USU_DS_CARGO%type default NULL,
     pSEG_USU_ID_USU_RESP_SUPERIOR IN TB_SEG_USU_USUARIO.SEG_USU_ID_USU_RESP_SUPERIOR%type default NULL,
     pSEG_USU_NR_CPF IN TB_SEG_USU_USUARIO.SEG_USU_NR_CPF%type DEFAULT NULL,
     pSEG_USU_DT_NASCIMENTO IN TB_SEG_USU_USUARIO.SEG_USU_DT_NASCIMENTO%type DEFAULT NULL,
     pNewIdt OUT integer
  ) 
  is
  /********************************************************************
  *    Procedure: PRC_SEG_USUARIO_I
  * 
  *    Data Criacao:   data da  criação   Por: Ricardo Costa
  *    Data Alteracao:  07/07/2009  Por: Alexandre M. Muniz
  *    Data Alteracao:  08/07/2009  Por: Alexandre M. Muniz
  *
  *    Funcao: Descrição da funcionalidade da Stored Procedure
  *
  *******************************************************************/  
  
    lIdtRetorno integer;
    
    vsSEG_USU_CD_PASSWORD TB_SEG_USU_USUARIO.SEG_USU_CD_PASSWORD%type;
    
  begin
  
    SELECT NVL(pSEG_USU_CD_PASSWORD, 'hac123') INTO vsSEG_USU_CD_PASSWORD FROM DUAL;

    SELECT SEQ_SEG_USU_01.NextVal INTO lIdtRetorno FROM DUAL;
      
    INSERT INTO TB_SEG_USU_USUARIO
    (
       SEG_USU_ID_USUARIO,
       SEG_USU_DS_NOME,
       SEG_USU_DS_LOGIN,
       SEG_USU_DS_EMAIL,
       SEG_USU_CD_PASSWORD,
       SEG_USU_CD_MATRICULA,
       SEG_USU_DS_TELEFONE,
       SEG_USU_DS_RAMAL,
       SEG_USU_FL_TROCAR_SENHA_OK,
       SEG_USU_FL_SENHA_NAO_EXPIRA_OK,
       SEG_USU_DT_EXPIRACAO,
       SEG_USU_FL_STATUS,
       SEG_USU_FL_RESPONS_PERFIL_OK,
       SEG_USU_QT_LOGIN_INVALIDO,
       SEG_USU_DT_ULTIMA_ATUALIZACAO,
       SEG_USU_DT_LOGIN_INVALIDO,
       SEG_USU_ID_ATUALIZADO_POR,
       SEG_USU_TP_INTER_EXTER,
       SEG_USU_DS_CARGO,
       SEG_USU_ID_USU_RESP_SUPERIOR,
       SEG_USU_NR_CPF,
       SEG_USU_DT_NASCIMENTO
    )
    VALUES
    (
       lIdtRetorno,
       pSEG_USU_DS_NOME,
       pSEG_USU_DS_LOGIN,
       pSEG_USU_DS_EMAIL,
       SGS.MD5(vsSEG_USU_CD_PASSWORD),
       pSEG_USU_CD_MATRICULA,
       pSEG_USU_DS_TELEFONE,
       pSEG_USU_DS_RAMAL,
       pSEG_USU_FL_TROCAR_SENHA_OK,
       pSEG_USU_FL_SENHA_NAO_EXPIRA,
       pSEG_USU_DT_EXPIRACAO,
       pSEG_USU_FL_STATUS,
       pSEG_USU_FL_RESPONS_PERFIL_OK,
       pSEG_USU_QT_LOGIN_INVALIDO,
       SYSDATE,
       pSEG_USU_DT_LOGIN_INVALIDO,
       pSEG_USU_ID_ATUALIZADO_POR,
       pSEG_USU_TP_INTER_EXTER,
       pSEG_USU_DS_CARGO,
       pSEG_USU_ID_USU_RESP_SUPERIOR,
       pSEG_USU_NR_CPF,
       pSEG_USU_DT_NASCIMENTO
    );
  
  	pNewIdt := lIdtRetorno;
  
  end PRC_SEG_USUARIO_I;