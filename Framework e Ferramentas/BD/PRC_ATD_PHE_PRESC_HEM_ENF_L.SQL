create or replace procedure PRC_ATD_PHE_PRESC_HEM_ENF_L
(
     pATD_PME_ID IN TB_ATD_PHE_PRESC_HEM_ENF.ATD_PME_ID%type DEFAULT NULL,
     pATD_PHE_HORA IN TB_ATD_PHE_PRESC_HEM_ENF.ATD_PHE_HORA%type DEFAULT NULL,
     pATD_PHE_VL_PASIS IN TB_ATD_PHE_PRESC_HEM_ENF.ATD_PHE_VL_PASIS%type DEFAULT NULL,
     pATD_PHE_VL_PULSO IN TB_ATD_PHE_PRESC_HEM_ENF.ATD_PHE_VL_PULSO%type DEFAULT NULL,
     pATD_PHE_VL_DOR IN TB_ATD_PHE_PRESC_HEM_ENF.ATD_PHE_VL_DOR%type DEFAULT NULL,
     pATD_PHE_VL_GLICCAP IN TB_ATD_PHE_PRESC_HEM_ENF.ATD_PHE_VL_GLICCAP%type DEFAULT NULL,
     pATD_PHE_VL_PADIS IN TB_ATD_PHE_PRESC_HEM_ENF.ATD_PHE_VL_PADIS%type DEFAULT NULL,
     pATD_PHE_ID_USU_CRIACAO IN TB_ATD_PHE_PRESC_HEM_ENF.ATD_PHE_ID_USU_CRIACAO%type DEFAULT NULL,
     pATD_PHE_DT_CRIACAO IN TB_ATD_PHE_PRESC_HEM_ENF.ATD_PHE_DT_CRIACAO%type DEFAULT NULL,
     pATD_PHE_ID_USU_ATUALIZ IN TB_ATD_PHE_PRESC_HEM_ENF.ATD_PHE_ID_USU_ATUALIZ%type DEFAULT NULL,
     pATD_PHE_DT_ULT_ATUALIZ IN TB_ATD_PHE_PRESC_HEM_ENF.ATD_PHE_DT_ULT_ATUALIZ%type DEFAULT NULL,
     pATD_PHE_ID IN TB_ATD_PHE_PRESC_HEM_ENF.ATD_PHE_ID%type DEFAULT NULL,
     pATD_PHE_VL_TEMPINI IN TB_ATD_PHE_PRESC_HEM_ENF.ATD_PHE_VL_TEMPINI%type DEFAULT NULL,
     pATD_PHE_VL_TEMPFIM IN TB_ATD_PHE_PRESC_HEM_ENF.ATD_PHE_VL_TEMPFIM%type DEFAULT NULL,
     pATD_PHE_VL_PESO IN TB_ATD_PHE_PRESC_HEM_ENF.ATD_PHE_VL_PESO%type DEFAULT NULL,
     io_cursor OUT PKG_CURSOR.t_cursor
)
is
/********************************************************************
*    Procedure: PRC_ATD_PHE_PRESC_HEM_ENF_L
*
*    Data Criacao:   data da  criação   Por: Nome do Analista
*    Data Alteracao:  data da alteração  Por: Nome do Analista
*
*    Funcao: Descrição da funcionalidade da Stored Procedure
*
*******************************************************************/
 v_cursor PKG_CURSOR.t_cursor;
  V_WHERE  varchar2(5000);
  V_SELECT  varchar2(5000);
  V_ORDER  varchar2(50);
begin
  V_WHERE := NULL;
  IF pATD_PME_ID IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PME_ID = ' || pATD_PME_ID; END IF;
IF pATD_PHE_HORA IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PHE_HORA = ' || pATD_PHE_HORA; END IF;
IF pATD_PHE_VL_PASIS IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PHE_VL_PASIS = ' || pATD_PHE_VL_PASIS; END IF;
IF pATD_PHE_VL_PULSO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PHE_VL_PULSO = ' || pATD_PHE_VL_PULSO; END IF;
IF pATD_PHE_VL_DOR IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PHE_VL_DOR = ' || pATD_PHE_VL_DOR; END IF;
IF pATD_PHE_VL_GLICCAP IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PHE_VL_GLICCAP = ' || pATD_PHE_VL_GLICCAP; END IF;
IF pATD_PHE_VL_PADIS IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PHE_VL_PADIS = ' || pATD_PHE_VL_PADIS; END IF;
IF pATD_PHE_ID_USU_CRIACAO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PHE_ID_USU_CRIACAO = ' || pATD_PHE_ID_USU_CRIACAO; END IF;
IF pATD_PHE_DT_CRIACAO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PHE_DT_CRIACAO = ' || CHR(39) || pATD_PHE_DT_CRIACAO || CHR(39); END IF;
IF pATD_PHE_ID_USU_ATUALIZ IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PHE_ID_USU_ATUALIZ = ' || pATD_PHE_ID_USU_ATUALIZ; END IF;
IF pATD_PHE_DT_ULT_ATUALIZ IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PHE_DT_ULT_ATUALIZ = ' || CHR(39) || pATD_PHE_DT_ULT_ATUALIZ || CHR(39); END IF;
IF pATD_PHE_ID IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PHE_ID = ' || pATD_PHE_ID; END IF;
IF pATD_PHE_VL_TEMPINI IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PHE_VL_TEMPINI = ' || pATD_PHE_VL_TEMPINI; END IF;
IF pATD_PHE_VL_TEMPFIM IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PHE_VL_TEMPFIM = ' || pATD_PHE_VL_TEMPFIM; END IF;
IF pATD_PHE_VL_PESO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND ATD_PHE_VL_PESO = ' || pATD_PHE_VL_PESO; END IF;

   V_SELECT := '
SELECT
       ATD_PME_ID,
       ATD_PHE_HORA,
       ATD_PHE_VL_PASIS,
       ATD_PHE_VL_PULSO,
       ATD_PHE_VL_DOR,
       ATD_PHE_VL_GLICCAP,
       ATD_PHE_VL_PADIS,
       ATD_PHE_ID_USU_CRIACAO,
       ATD_PHE_DT_CRIACAO,
       ATD_PHE_ID_USU_ATUALIZ,
       ATD_PHE_DT_ULT_ATUALIZ,
       ATD_PHE_ID,
       ATD_PHE_VL_TEMPINI,
       ATD_PHE_VL_TEMPFIM,
       ATD_PHE_VL_PESO
FROM TB_ATD_PHE_PRESC_HEM_ENF
WHERE null is null  '    ;

 V_ORDER := 'ORDER BY ATD_PHE_HORA asc';

OPEN v_cursor FOR
  V_SELECT || V_WHERE || V_ORDER;
  io_cursor := v_cursor;
end PRC_ATD_PHE_PRESC_HEM_ENF_L;
