create or replace procedure PRC_CAD_IPA_ITEM_PCT_PRD_TAP_S
(
     pCAD_IPA_ID IN TB_CAD_IPA_ITEM_PACOTE.CAD_IPA_ID%type DEFAULT NULL,
     pCAD_PRD_ID_PACOTE IN TB_CAD_IPA_ITEM_PACOTE.CAD_PRD_ID_PACOTE%type DEFAULT NULL,
     pCAD_IPA_VL_ITEM_PACOTE IN TB_CAD_IPA_ITEM_PACOTE.CAD_IPA_VL_ITEM_PACOTE%type DEFAULT NULL,
     pCAD_IPA_PC_RATEIO IN TB_CAD_IPA_ITEM_PACOTE.CAD_IPA_PC_RATEIO%type DEFAULT NULL,
     pCAD_IPA_DT_INICIO_VIGENCIA IN TB_CAD_IPA_ITEM_PACOTE.CAD_IPA_DT_INICIO_VIGENCIA%type DEFAULT NULL,
     pCAD_IPA_DT_FIM_VIGENCIA IN TB_CAD_IPA_ITEM_PACOTE.CAD_IPA_DT_FIM_VIGENCIA%type DEFAULT NULL,
     pSEG_USU_ID_USUARIO IN TB_CAD_IPA_ITEM_PACOTE.SEG_USU_ID_USUARIO%type DEFAULT NULL,
     pCAD_IPA_FL_STATUS IN TB_CAD_IPA_ITEM_PACOTE.CAD_IPA_FL_STATUS%type DEFAULT NULL,
     pCAD_IPA_PC_DESCONTO IN TB_CAD_IPA_ITEM_PACOTE.CAD_IPA_PC_DESCONTO%type DEFAULT NULL,
     pCAD_IPA_PC_ACRESCIMO IN TB_CAD_IPA_ITEM_PACOTE.CAD_IPA_PC_ACRESCIMO%type DEFAULT NULL,
     pCAD_IPA_DS_OBSERVACAO IN TB_CAD_IPA_ITEM_PACOTE.CAD_IPA_DS_OBSERVACAO%type DEFAULT NULL,
     pCAD_IPA_DT_ULTIMA_ATUALIZACAO IN TB_CAD_IPA_ITEM_PACOTE.CAD_IPA_DT_ULTIMA_ATUALIZACAO%type DEFAULT NULL,
     pCAD_PRD_ID_ITEM_PACOTE IN TB_CAD_IPA_ITEM_PACOTE.CAD_PRD_ID_ITEM_PACOTE%type DEFAULT NULL,
     pCAD_IPA_VL_ORIG_ITEM_PRODUTO IN TB_CAD_IPA_ITEM_PACOTE.CAD_IPA_VL_ORIG_ITEM_PRODUTO%type DEFAULT NULL,
     pCAD_IPA_VL_ACRESCIMO IN TB_CAD_IPA_ITEM_PACOTE.CAD_IPA_VL_ACRESCIMO%type DEFAULT NULL,
     pCAD_IPA_VL_DESCONTO IN TB_CAD_IPA_ITEM_PACOTE.CAD_IPA_VL_DESCONTO%type DEFAULT NULL,
     pCAD_IPA_VL_FINAL_PACOTE IN TB_CAD_IPA_ITEM_PACOTE.CAD_IPA_VL_FINAL_PACOTE%type DEFAULT NULL,
     pCAD_IPA_QT_ITEM_PACOTE IN TB_CAD_IPA_ITEM_PACOTE.CAD_IPA_QT_ITEM_PACOTE%type DEFAULT NULL,
     io_cursor OUT PKG_CURSOR.t_cursor
  )
  is
  /********************************************************************
  *    Procedure: PRC_CAD_IPA_ITEM_PCT_PRD_TAP_S
  *
  *    Data Criacao:   data da  criação   Por: Nome do Analista
  *    Data Alteracao:  data da alteração  Por: Nome do Analista
  *
  *    Funcao: Descrição da funcionalidade da Stored Procedure
  *
  *******************************************************************/
  v_cursor PKG_CURSOR.t_cursor;
  begin
    OPEN v_cursor FOR
    SELECT	
		   IPA.CAD_IPA_ID,
       IPA.CAD_PRD_ID_PACOTE,
       IPA.CAD_IPA_VL_ITEM_PACOTE,
       IPA.CAD_IPA_PC_RATEIO,
       IPA.CAD_IPA_DT_INICIO_VIGENCIA,
       IPA.CAD_IPA_DT_FIM_VIGENCIA,
       IPA.SEG_USU_ID_USUARIO,
       IPA.CAD_IPA_FL_STATUS,
       IPA.CAD_IPA_PC_DESCONTO,
       IPA.CAD_IPA_PC_ACRESCIMO,
       IPA.CAD_IPA_DS_OBSERVACAO,
       IPA.CAD_IPA_DT_ULTIMA_ATUALIZACAO,
       IPA.CAD_PRD_ID_ITEM_PACOTE,
       IPA.CAD_IPA_VL_ORIG_ITEM_PRODUTO,
       IPA.CAD_IPA_VL_ACRESCIMO,
       IPA.CAD_IPA_VL_DESCONTO,
       IPA.CAD_IPA_VL_FINAL_PACOTE,
       IPA.CAD_IPA_QT_ITEM_PACOTE,

       PRD.CAD_PRD_DS_DESCRICAO,

       TAP.CAD_TAP_DS_ATRIBUTO

      FROM TB_CAD_IPA_ITEM_PACOTE      IPA,
           TB_CAD_PRD_PRODUTO          PRD,
           TB_CAD_TAP_TP_ATRIB_PRODUTO TAP

     WHERE (IPA.CAD_PRD_ID_PACOTE = PRD.CAD_PRD_ID) AND
           (PRD.CAD_TAP_TP_ATRIBUTO = TAP.CAD_TAP_TP_ATRIBUTO) AND
           (pCAD_IPA_ID is null OR CAD_IPA_ID = pCAD_IPA_ID) AND 
        (pCAD_PRD_ID_PACOTE is null OR IPA.CAD_PRD_ID_PACOTE = pCAD_PRD_ID_PACOTE) AND 
        (pCAD_IPA_VL_ITEM_PACOTE is null OR IPA.CAD_IPA_VL_ITEM_PACOTE = pCAD_IPA_VL_ITEM_PACOTE) AND 
        (pCAD_IPA_PC_RATEIO is null OR IPA.CAD_IPA_PC_RATEIO = pCAD_IPA_PC_RATEIO) AND 
        (pCAD_IPA_DT_INICIO_VIGENCIA is null OR IPA.CAD_IPA_DT_INICIO_VIGENCIA = pCAD_IPA_DT_INICIO_VIGENCIA) AND 
        (pCAD_IPA_DT_FIM_VIGENCIA is null OR IPA.CAD_IPA_DT_FIM_VIGENCIA = pCAD_IPA_DT_FIM_VIGENCIA) AND 
        (pSEG_USU_ID_USUARIO is null OR IPA.SEG_USU_ID_USUARIO = pSEG_USU_ID_USUARIO) AND 
        (pCAD_IPA_FL_STATUS is null OR IPA.CAD_IPA_FL_STATUS = pCAD_IPA_FL_STATUS) AND 
        (pCAD_IPA_PC_DESCONTO is null OR IPA.CAD_IPA_PC_DESCONTO = pCAD_IPA_PC_DESCONTO) AND 
        (pCAD_IPA_PC_ACRESCIMO is null OR IPA.CAD_IPA_PC_ACRESCIMO = pCAD_IPA_PC_ACRESCIMO) AND 
        (pCAD_IPA_DS_OBSERVACAO is null OR IPA.CAD_IPA_DS_OBSERVACAO = pCAD_IPA_DS_OBSERVACAO) AND 
        (pCAD_IPA_DT_ULTIMA_ATUALIZACAO is null OR IPA.CAD_IPA_DT_ULTIMA_ATUALIZACAO = pCAD_IPA_DT_ULTIMA_ATUALIZACAO) AND 
        (pCAD_PRD_ID_ITEM_PACOTE is null OR IPA.CAD_PRD_ID_ITEM_PACOTE = pCAD_PRD_ID_ITEM_PACOTE) AND 
        (pCAD_IPA_VL_ORIG_ITEM_PRODUTO is null OR IPA.CAD_IPA_VL_ORIG_ITEM_PRODUTO = pCAD_IPA_VL_ORIG_ITEM_PRODUTO) AND 
        (pCAD_IPA_VL_ACRESCIMO is null OR IPA.CAD_IPA_VL_ACRESCIMO = pCAD_IPA_VL_ACRESCIMO) AND 
        (pCAD_IPA_VL_DESCONTO is null OR IPA.CAD_IPA_VL_DESCONTO = pCAD_IPA_VL_DESCONTO) AND 
        (pCAD_IPA_VL_FINAL_PACOTE is null OR IPA.CAD_IPA_VL_FINAL_PACOTE = pCAD_IPA_VL_FINAL_PACOTE) AND 
        (pCAD_IPA_QT_ITEM_PACOTE is null OR IPA.CAD_IPA_QT_ITEM_PACOTE = pCAD_IPA_QT_ITEM_PACOTE);
    io_cursor := v_cursor;
  end PRC_CAD_IPA_ITEM_PCT_PRD_TAP_S;