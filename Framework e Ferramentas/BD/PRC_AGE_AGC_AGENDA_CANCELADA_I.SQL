CREATE OR REPLACE PROCEDURE "PRC_AGE_AGC_AGENDA_CANCELADA_I"
  (
     pAGE_AGD_ID IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGD_ID%type,
     pSEG_USU_ID_USUARIO IN TB_AGE_AGC_AGENDA_CANCELADA.SEG_USU_ID_USUARIO%type,
     pAGE_AGC_DT_CANCELAMENTO IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGC_DT_CANCELAMENTO%type,
     pAGE_AGC_TP_CANCELAMENTO IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGC_TP_CANCELAMENTO%type,
     pAGE_AGC_TP_FORMA_CANCELA IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGC_TP_FORMA_CANCELA%type,
     pAGE_AGC_DS_OBSERVACAO IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGC_DS_OBSERVACAO%type default NULL,
     pAGE_AGC_NM_SOLICITANTE IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGC_NM_SOLICITANTE%type,
     pAGE_AGD_DT_AGENDA IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGD_DT_AGENDA%type default NULL,
     pAGE_AGD_HR_AGENDA IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGD_HR_AGENDA%type default NULL,
     pAGE_AGD_TP_AGENDA IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGD_TP_AGENDA%type default NULL,
     pAGE_AGD_CD_AMBESP IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGD_CD_AMBESP%type default NULL,
     pAGE_AGD_CD_AMBGRP IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGD_CD_AMBGRP%type default NULL,
     pAGE_AGD_CD_AMBSEQ IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGD_CD_AMBSEQ%type default NULL,
     pAGE_AGD_CD_AMBTP IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGD_CD_AMBTP%type default NULL,
     pAGE_AGD_DT_ATENDIMENTO IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGD_DT_ATENDIMENTO%type default NULL,
     pAGE_AGD_HR_ATENDIMENTO IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGD_HR_ATENDIMENTO%type default NULL,
     pAGE_AGD_FL_STATUS IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGD_FL_STATUS%type default NULL,
     pAGE_AGD_DS_OBSERVACAO IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGD_DS_OBSERVACAO%type default NULL,
     pAGE_AGD_CD_INTAMB IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGD_CD_INTAMB%type default NULL,
     pAGE_AGD_IN_INTAMB IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGD_IN_INTAMB%type default NULL,
     pAGE_ESM_ID IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_ESM_ID%type default NULL,
     pCAD_PAC_ID_PACIENTE IN TB_AGE_AGC_AGENDA_CANCELADA.CAD_PAC_ID_PACIENTE%type default NULL,
     pCAD_PRO_ID_PROFISSIONALEXEC IN TB_AGE_AGC_AGENDA_CANCELADA.CAD_PRO_ID_PROFISSIONALEXEC%type default NULL,
     pCAD_PRO_ID_PROFISSIONALSOLIC IN TB_AGE_AGC_AGENDA_CANCELADA.CAD_PRO_ID_PROFISSIONALSOLIC%type default NULL,
     pAGE_AGD_DT_LIMITE_RETORNO IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGD_DT_LIMITE_RETORNO%type default NULL,
     pAGE_AGG_ID IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGG_ID%type default NULL,
     pCAD_PRD_ID IN TB_AGE_AGC_AGENDA_CANCELADA.CAD_PRD_ID%type default NULL,
     pSEG_USU_ID_DESBLOQUEIO IN TB_AGE_AGC_AGENDA_CANCELADA.SEG_USU_ID_DESBLOQUEIO%type default NULL,
     pSEG_USU_ID_AGENENCESP IN TB_AGE_AGC_AGENDA_CANCELADA.SEG_USU_ID_AGENENCESP%type default NULL,
     pCAD_UNI_ID_UNID_LOGIN_USU IN Tb_Age_Agc_Agenda_Cancelada.CAD_UNI_ID_UNID_LOGIN_USU%TYPE DEFAULT NULL,
     pAGE_AGD_FL_TELEMEDICINA IN Tb_Age_Agc_Agenda_Cancelada.Age_Agd_Fl_Telemedicina%TYPE DEFAULT NULL,
      pAGE_AGD_FL_CONFIRMA_STATUS IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGD_FL_CONFIRMA_STATUS%TYPE DEFAULT NULL,
      pAGE_AGD_FL_CONFIRMA_TIPO IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGD_FL_CONFIRMA_TIPO%TYPE DEFAULT NULL,
      pAGE_AGD_DS_CONFIRMA_OBS IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGD_DS_CONFIRMA_OBS%TYPE DEFAULT NULL,
      pSEG_USU_ID_CONFIRMA IN TB_AGE_AGC_AGENDA_CANCELADA.SEG_USU_ID_CONFIRMA%TYPE DEFAULT NULL,
      pAGE_AGD_DT_CONFIRMA IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGD_DT_CONFIRMA%TYPE DEFAULT NULL,
      pAGE_AGD_CD_REMARCACAO  IN TB_AGE_AGC_AGENDA_CANCELADA.AGE_AGD_CD_REMARCACAO%TYPE DEFAULT NULL
  )
  is
  /********************************************************************
  *    Procedure: PRC_AGE_AGC_AGENDA_CANCELADA_I
  *
  *    Data Alteracao:  10/06/2016  Por: PEDRO
  *    Alteracao: add CAD_UNI_ID_UNID_LOGIN_USU
  *
  *******************************************************************/
   begin
    INSERT INTO TB_AGE_AGC_AGENDA_CANCELADA
    (
       AGE_AGD_ID,
       SEG_USU_ID_USUARIO,
       AGE_AGC_DT_CANCELAMENTO,
       AGE_AGC_TP_CANCELAMENTO,
       AGE_AGC_TP_FORMA_CANCELA,
       AGE_AGC_DS_OBSERVACAO,
       AGE_AGC_NM_SOLICITANTE,
       AGE_AGD_DT_AGENDA,
       AGE_AGD_HR_AGENDA,
       AGE_AGD_TP_AGENDA,
       AGE_AGD_CD_AMBESP,
       AGE_AGD_CD_AMBGRP,
       AGE_AGD_CD_AMBSEQ,
       AGE_AGD_CD_AMBTP,
       AGE_AGD_DT_ATENDIMENTO,
       AGE_AGD_HR_ATENDIMENTO,
       AGE_AGD_FL_STATUS,
       AGE_AGD_DS_OBSERVACAO,
       AGE_AGD_CD_INTAMB,
       AGE_AGD_IN_INTAMB,
       AGE_ESM_ID,
       CAD_PAC_ID_PACIENTE,
       CAD_PRO_ID_PROFISSIONALEXEC,
       CAD_PRO_ID_PROFISSIONALSOLIC,
       AGE_AGD_DT_LIMITE_RETORNO,
       AGE_AGG_ID,
       CAD_PRD_ID,
       SEG_USU_ID_DESBLOQUEIO,
       SEG_USU_ID_AGENENCESP,
       CAD_UNI_ID_UNID_LOGIN_USU,
       age_agd_fl_telemedicina,
       age_agd_fl_confirma_status,
       age_agd_fl_confirma_tipo,
       age_agd_ds_confirma_obs,
       seg_usu_id_confirma,
       age_agd_dt_confirma,
       AGE_AGD_CD_REMARCACAO
    )
    VALUES
    (
       pAGE_AGD_ID,
       pSEG_USU_ID_USUARIO,
       pAGE_AGC_DT_CANCELAMENTO,
       pAGE_AGC_TP_CANCELAMENTO,
       pAGE_AGC_TP_FORMA_CANCELA,
       pAGE_AGC_DS_OBSERVACAO,
       pAGE_AGC_NM_SOLICITANTE,
       pAGE_AGD_DT_AGENDA,
       pAGE_AGD_HR_AGENDA,
       pAGE_AGD_TP_AGENDA,
       pAGE_AGD_CD_AMBESP,
       pAGE_AGD_CD_AMBGRP,
       pAGE_AGD_CD_AMBSEQ,
       pAGE_AGD_CD_AMBTP,
       pAGE_AGD_DT_ATENDIMENTO,
       pAGE_AGD_HR_ATENDIMENTO,
       pAGE_AGD_FL_STATUS,
       pAGE_AGD_DS_OBSERVACAO,
       pAGE_AGD_CD_INTAMB,
       pAGE_AGD_IN_INTAMB,
       pAGE_ESM_ID,
       pCAD_PAC_ID_PACIENTE,
       pCAD_PRO_ID_PROFISSIONALEXEC,
       pCAD_PRO_ID_PROFISSIONALSOLIC,
       pAGE_AGD_DT_LIMITE_RETORNO,
       pAGE_AGG_ID,
       pCAD_PRD_ID,
       pSEG_USU_ID_DESBLOQUEIO,
       pSEG_USU_ID_AGENENCESP,
       pCAD_UNI_ID_UNID_LOGIN_USU,
       pAGE_AGD_FL_TELEMEDICINA,
       pAGE_AGD_FL_CONFIRMA_STATUS,
       pAGE_AGD_FL_CONFIRMA_TIPO,
       pAGE_AGD_DS_CONFIRMA_OBS,
       pSEG_USU_ID_CONFIRMA,
       pAGE_AGD_DT_CONFIRMA,
       pAGE_AGD_CD_REMARCACAO
    );
    IF pAGE_AGD_CD_INTAMB IS NOT NULL THEN
       DELETE FROM HOSPITAL.GUIA_ATENDIMENTO_AMB
       WHERE CODATEAMB = pAGE_AGD_CD_INTAMB;
       DELETE FROM HOSPITAL.PACIENTE_ATENDIMENTO_AMB
       WHERE CODATEAMB = pAGE_AGD_CD_INTAMB;
    END IF;
  end PRC_AGE_AGC_AGENDA_CANCELADA_I;
