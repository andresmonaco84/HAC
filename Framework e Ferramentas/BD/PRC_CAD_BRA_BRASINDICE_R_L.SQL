 
--PRC_CAD_BRA_BRASINDICE_R_L
create or replace procedure PRC_CAD_BRA_BRASINDICE_R_L 
(
     pCAD_BRA_ID IN TB_CAD_BRA_BRASINDICE.CAD_BRA_ID%type DEFAULT NULL,
     pCAD_BRA_CD_TISS IN TB_CAD_BRA_BRASINDICE.CAD_BRA_CD_TISS%type DEFAULT NULL,
     pCAD_BRA_NM_MNEMONICO IN TB_CAD_BRA_BRASINDICE.CAD_BRA_NM_MNEMONICO%type DEFAULT NULL,
     pCAD_BRA_CD_LAB IN TB_CAD_BRA_BRASINDICE.CAD_BRA_CD_LAB%type DEFAULT NULL,
     pCAD_BRA_DS_LAB IN TB_CAD_BRA_BRASINDICE.CAD_BRA_DS_LAB%type DEFAULT NULL,
     pCAD_BRA_CD_PRODUTO IN TB_CAD_BRA_BRASINDICE.CAD_BRA_CD_PRODUTO%type DEFAULT NULL,
     pCAD_BRA_DS_PRODUTO IN TB_CAD_BRA_BRASINDICE.CAD_BRA_DS_PRODUTO%type DEFAULT NULL,
     pCAD_BRA_CD_APR IN TB_CAD_BRA_BRASINDICE.CAD_BRA_CD_APR%type DEFAULT NULL,
     pCAD_BRA_DS_APR IN TB_CAD_BRA_BRASINDICE.CAD_BRA_DS_APR%type DEFAULT NULL,
     pCAD_BRA_VL_PRECO IN TB_CAD_BRA_BRASINDICE.CAD_BRA_VL_PRECO%type DEFAULT NULL,
     pCAD_BRA_QT_EMBALAGEM IN TB_CAD_BRA_BRASINDICE.CAD_BRA_QT_EMBALAGEM%type DEFAULT NULL,
     pCAD_BRA_TP_PRECO IN TB_CAD_BRA_BRASINDICE.CAD_BRA_TP_PRECO%type DEFAULT NULL,
     pCAD_BRA_VL_PRECO_UNITARIO IN TB_CAD_BRA_BRASINDICE.CAD_BRA_VL_PRECO_UNITARIO%type DEFAULT NULL,
     pCAD_BRA_ED_EDICAO IN TB_CAD_BRA_BRASINDICE.CAD_BRA_ED_EDICAO%type DEFAULT NULL,
     pCAD_BRA_PC_IPI IN TB_CAD_BRA_BRASINDICE.CAD_BRA_PC_IPI%type DEFAULT NULL,
     pCAD_CME_CLASSIF_MED IN TB_CAD_BRA_BRASINDICE.CAD_CME_CLASSIF_MED%type DEFAULT NULL,
     pCAD_BRA_ID_INTEIRO IN TB_CAD_BRA_BRASINDICE.CAD_BRA_ID_INTEIRO%type DEFAULT NULL,
     pCAD_BRA_ID_FRACIONADO IN TB_CAD_BRA_BRASINDICE.CAD_BRA_ID_FRACIONADO%type DEFAULT NULL,
     pCAD_BRA_QT_FRACIONADO IN TB_CAD_BRA_BRASINDICE.CAD_BRA_QT_FRACIONADO%type DEFAULT NULL,
     pCAD_BRA_DT_ULTIMA_ATUALIZACAO IN TB_CAD_BRA_BRASINDICE.CAD_BRA_DT_ULTIMA_ATUALIZACAO%type DEFAULT NULL,
     pSEG_USU_ID_USUARIO IN TB_CAD_BRA_BRASINDICE.SEG_USU_ID_USUARIO%type DEFAULT NULL,
     pCAD_BRA_TP_MATMED IN TB_CAD_BRA_BRASINDICE.CAD_BRA_TP_MATMED%type DEFAULT NULL,
     pCAD_BRA_FL_RESTRITO IN TB_CAD_BRA_BRASINDICE.CAD_BRA_FL_RESTRITO%type DEFAULT NULL,
     pCAD_BRA_CD_ANVISA IN TB_CAD_BRA_BRASINDICE.CAD_BRA_CD_ANVISA%type DEFAULT NULL,
     pCAD_BRA_IN_NOVO IN TB_CAD_BRA_BRASINDICE.CAD_BRA_IN_NOVO%type DEFAULT NULL,
     pCAD_BRA_DT_CRIACAO IN TB_CAD_BRA_BRASINDICE.CAD_BRA_DT_CRIACAO%type DEFAULT NULL,
	 pCAD_BRA_CD_TUSS IN TB_CAD_BRA_BRASINDICE.CAD_BRA_CD_TUSS%type DEFAULT NULL,
     io_cursor OUT PKG_CURSOR.t_cursor
) 
is
/********************************************************************
*    Procedure: PRC_CAD_BRA_BRASINDICE_R_L
* 
*    Data Criacao: 	data da  criação   Por: Nome do Analista
*    Data Alteracao:	data da alteração  Por: Nome do Analista
*
*    Funcao: Descrição da funcionalidade da Stored Procedure
*
*******************************************************************/
 v_cursor PKG_CURSOR.t_cursor;
  V_WHERE  varchar2(5000);
  V_SELECT  varchar2(5000);
begin
  V_WHERE := NULL;
  IF pCAD_BRA_ID IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_ID = ' || pCAD_BRA_ID; END IF;
IF pCAD_BRA_CD_TISS IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_CD_TISS = ' || CHR(39) || pCAD_BRA_CD_TISS || CHR(39); END IF;
IF pCAD_BRA_NM_MNEMONICO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_NM_MNEMONICO = ' || CHR(39) || pCAD_BRA_NM_MNEMONICO || CHR(39); END IF;
IF pCAD_BRA_CD_LAB IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_CD_LAB = ' || CHR(39) || pCAD_BRA_CD_LAB || CHR(39); END IF;
IF pCAD_BRA_DS_LAB IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_DS_LAB = ' || CHR(39) || pCAD_BRA_DS_LAB || CHR(39); END IF;
IF pCAD_BRA_CD_PRODUTO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_CD_PRODUTO = ' || CHR(39) || pCAD_BRA_CD_PRODUTO || CHR(39); END IF;
IF pCAD_BRA_DS_PRODUTO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_DS_PRODUTO = ' || CHR(39) || pCAD_BRA_DS_PRODUTO || CHR(39); END IF;
IF pCAD_BRA_CD_APR IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_CD_APR = ' || CHR(39) || pCAD_BRA_CD_APR || CHR(39); END IF;
IF pCAD_BRA_DS_APR IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_DS_APR = ' || CHR(39) || pCAD_BRA_DS_APR || CHR(39); END IF;
IF pCAD_BRA_VL_PRECO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_VL_PRECO = ' || pCAD_BRA_VL_PRECO; END IF;
IF pCAD_BRA_QT_EMBALAGEM IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_QT_EMBALAGEM = ' || pCAD_BRA_QT_EMBALAGEM; END IF;
IF pCAD_BRA_TP_PRECO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_TP_PRECO = ' || CHR(39) || pCAD_BRA_TP_PRECO || CHR(39); END IF;
IF pCAD_BRA_VL_PRECO_UNITARIO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_VL_PRECO_UNITARIO = ' || pCAD_BRA_VL_PRECO_UNITARIO; END IF;
IF pCAD_BRA_ED_EDICAO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_ED_EDICAO = ' || pCAD_BRA_ED_EDICAO; END IF;
IF pCAD_BRA_PC_IPI IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_PC_IPI = ' || pCAD_BRA_PC_IPI; END IF;
IF pCAD_CME_CLASSIF_MED IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_CME_CLASSIF_MED = ' || pCAD_CME_CLASSIF_MED; END IF;
IF pCAD_BRA_ID_INTEIRO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_ID_INTEIRO = ' || CHR(39) || pCAD_BRA_ID_INTEIRO || CHR(39); END IF;
IF pCAD_BRA_ID_FRACIONADO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_ID_FRACIONADO = ' || CHR(39) || pCAD_BRA_ID_FRACIONADO || CHR(39); END IF;
IF pCAD_BRA_QT_FRACIONADO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_QT_FRACIONADO = ' || pCAD_BRA_QT_FRACIONADO; END IF;
IF pCAD_BRA_DT_ULTIMA_ATUALIZACAO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_DT_ULTIMA_ATUALIZACAO = ' || CHR(39) || pCAD_BRA_DT_ULTIMA_ATUALIZACAO || CHR(39); END IF;
IF pSEG_USU_ID_USUARIO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND SEG_USU_ID_USUARIO = ' || pSEG_USU_ID_USUARIO; END IF;
IF pCAD_BRA_TP_MATMED IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_TP_MATMED = ' || CHR(39) || pCAD_BRA_TP_MATMED || CHR(39); END IF;
IF pCAD_BRA_FL_RESTRITO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_FL_RESTRITO = ' || CHR(39) || pCAD_BRA_FL_RESTRITO || CHR(39); END IF;
IF pCAD_BRA_CD_ANVISA IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_BRA_CD_ANVISA = ' || CHR(39) || pCAD_BRA_CD_ANVISA || CHR(39); END IF;
IF pCAD_BRA_IN_NOVO IS NOT NULL THEN V_WHERE := V_WHERE || ' AND CAD_BRA_IN_NOVO = ' || CHR(39) || pCAD_BRA_IN_NOVO || CHR(39); END IF;
IF pCAD_BRA_DT_CRIACAO IS NOT NULL THEN V_WHERE := V_WHERE || ' AND CAD_BRA_DT_CRIACAO = ' || CHR(39) || pCAD_BRA_DT_CRIACAO || CHR(39); END IF;
IF pCAD_BRA_CD_TUSS IS NOT NULL THEN V_WHERE := V_WHERE || ' AND CAD_BRA_CD_TUSS = ' || CHR(39) || pCAD_BRA_CD_TUSS || CHR(39); END IF;
 
   V_SELECT := '
SELECT	
       CAD_BRA_ID,
       CAD_BRA_CD_TISS,
       CAD_BRA_NM_MNEMONICO,
       CAD_BRA_CD_LAB,
       CAD_BRA_DS_LAB,
       CAD_BRA_CD_PRODUTO,
       CAD_BRA_DS_PRODUTO,
       CAD_BRA_CD_APR,
       CAD_BRA_DS_APR,
       CAD_BRA_VL_PRECO,
       CAD_BRA_QT_EMBALAGEM,
       CAD_BRA_TP_PRECO,
       CAD_BRA_VL_PRECO_UNITARIO,
       CAD_BRA_ED_EDICAO,
       CAD_BRA_PC_IPI,
       CAD_CME_CLASSIF_MED,
       CAD_BRA_ID_INTEIRO,
       CAD_BRA_ID_FRACIONADO,
       CAD_BRA_QT_FRACIONADO,
       CAD_BRA_DT_ULTIMA_ATUALIZACAO,
       SEG_USU_ID_USUARIO,
       CAD_BRA_TP_MATMED,
       CAD_BRA_FL_RESTRITO,
       CAD_BRA_CD_ANVISA,
       CAD_BRA_IN_NOVO,
       CAD_BRA_DT_CRIACAO,
	   CAD_BRA_CD_TUSS
FROM TB_CAD_BRA_BRASINDICE
WHERE null is null  '    ;
       
OPEN v_cursor FOR
  V_SELECT || V_WHERE ;
  io_cursor := v_cursor;
end PRC_CAD_BRA_BRASINDICE_R_L;
