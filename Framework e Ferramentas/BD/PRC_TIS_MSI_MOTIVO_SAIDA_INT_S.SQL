create or replace procedure PRC_TIS_MSI_MOTIVO_SAIDA_INT_S
(
     pTIS_MSI_CD_MOTIVOSAIDAINT IN TB_TIS_MSI_MOTIVO_SAIDA_INT.TIS_MSI_CD_MOTIVOSAIDAINT%type DEFAULT NULL,
     pTIS_MSI_CD_TIPOALTA IN TB_TIS_MSI_MOTIVO_SAIDA_INT.TIS_MSI_CD_TIPOALTA%type DEFAULT NULL,
     pTIS_MSI_DS_MOTIVOSAIDAINT IN TB_TIS_MSI_MOTIVO_SAIDA_INT.TIS_MSI_DS_MOTIVOSAIDAINT%type DEFAULT NULL,
     pTIS_MSI_FL_STATUS IN TB_TIS_MSI_MOTIVO_SAIDA_INT.TIS_MSI_FL_STATUS%type DEFAULT NULL,
     io_cursor OUT PKG_CURSOR.t_cursor
)
is
/********************************************************************
*    Procedure: PRC_TIS_MSI_MOTIVO_SAIDA_INT_S
*
*    Data Criacao:  data da  criac?o   Por: Nome do Analista
*    Data Alteracao: data da alterac?o  Por: Nome do Analista
*
*    Funcao: Descric?o da funcionalidade da Stored Procedure
*
*******************************************************************/
 v_cursor PKG_CURSOR.t_cursor;
  V_WHERE  varchar2(5000);
  V_SELECT  varchar2(5000);
begin
  V_WHERE := NULL;
  IF pTIS_MSI_CD_MOTIVOSAIDAINT IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND TIS_MSI_CD_MOTIVOSAIDAINT = ' || CHR(39) || pTIS_MSI_CD_MOTIVOSAIDAINT || CHR(39); END IF;
IF pTIS_MSI_CD_TIPOALTA IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND TIS_MSI_CD_TIPOALTA = ' || pTIS_MSI_CD_TIPOALTA; END IF;
IF pTIS_MSI_DS_MOTIVOSAIDAINT IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND TIS_MSI_DS_MOTIVOSAIDAINT LIKE ' || CHR(39) || UPPER(pTIS_MSI_DS_MOTIVOSAIDAINT) || CHR(39); END IF;
 IF pTIS_MSI_FL_STATUS IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND TIS_MSI_FL_STATUS = ' || pTIS_MSI_FL_STATUS; END IF;

   V_SELECT := '
SELECT
       TIS_MSI_CD_MOTIVOSAIDAINT,
       TIS_MSI_CD_TIPOALTA,
       TIS_MSI_DS_MOTIVOSAIDAINT,
       TIS_MSI_FL_STATUS,
       TIS_MSI_DT_CRIACAO,
       SEG_USU_ID_USUARIO_CRIACAO,
       TIS_MSI_DT_ULT_ATUALIZACAO,
       SEG_USU_ID_USU_ULT_ATUALIZ,
       TIS_MSI_DT_CRIACAO,
SEG_USU_ID_USUARIO_CRIACAO,
TIS_MSI_DT_ULT_ATUALIZACAO,
SEG_USU_ID_USU_ULT_ATUALIZ


FROM TB_TIS_MSI_MOTIVO_SAIDA_INT
WHERE null is null  '    ;

OPEN v_cursor FOR
  V_SELECT || V_WHERE ;
  io_cursor := v_cursor;
end PRC_TIS_MSI_MOTIVO_SAIDA_INT_S;


 