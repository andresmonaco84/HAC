CREATE OR REPLACE PROCEDURE "PRC_CAD_PLA_PLANO_U"
  (
     pCAD_PLA_ID_PLANO IN TB_CAD_PLA_PLANO.CAD_PLA_ID_PLANO%type,
     pCAD_PLA_CD_PLANO_HAC IN TB_CAD_PLA_PLANO.CAD_PLA_CD_PLANO_HAC%type default NULL,
     pCAD_PLA_CD_PLANO IN TB_CAD_PLA_PLANO.CAD_PLA_CD_PLANO%type default NULL,
     pCAD_PLA_CD_TIPOPLANO IN TB_CAD_PLA_PLANO.CAD_PLA_CD_TIPOPLANO%type default NULL,
     pCAD_PLA_NM_NOME_PLANO IN TB_CAD_PLA_PLANO.CAD_PLA_NM_NOME_PLANO%type default NULL,
     pCAD_PLA_FL_SITUACAO_PLANO IN TB_CAD_PLA_PLANO.CAD_PLA_FL_SITUACAO_PLANO%type default NULL,
     pCAD_CNV_ID_CONVENIO IN TB_CAD_PLA_PLANO.CAD_CNV_ID_CONVENIO%type,
     pSEG_USU_ID_USUARIO IN TB_CAD_PLA_PLANO.SEG_USU_ID_USUARIO%type,
     pCAD_PLA_DT_INICIO_VIGENCIA IN TB_CAD_PLA_PLANO.CAD_PLA_DT_INICIO_VIGENCIA%type,
     pCAD_PLA_DT_FIM_VIGENCIA IN TB_CAD_PLA_PLANO.CAD_PLA_DT_FIM_VIGENCIA%type default NULL,
     pCAD_PLA_DS_OBS_FIM_VIG IN TB_CAD_PLA_PLANO.CAD_PLA_DS_OBS_FIM_VIG%type default NULL,
     pCAD_PLA_FL_EXIGE_GUIA IN TB_CAD_PLA_PLANO.CAD_PLA_FL_EXIGE_GUIA%type default NULL,
     pCAD_PLA_FL_EXIGE_SENHA_LIB_OK IN TB_CAD_PLA_PLANO.CAD_PLA_FL_EXIGE_SENHA_LIB_OK%type default NULL,
     pCAD_PLA_FL_LIBERA_EXAME_OK IN TB_CAD_PLA_PLANO.CAD_PLA_FL_LIBERA_EXAME_OK%type default NULL,
     pCAD_PLA_DS_ORIENTACAO IN TB_CAD_PLA_PLANO.CAD_PLA_DS_ORIENTACAO%TYPE DEFAULT NULL,
     pCAD_PLA_FL_AUTORIZA_ONLINE IN TB_CAD_PLA_PLANO.CAD_PLA_FL_AUTORIZA_ONLINE%TYPE DEFAULT NULL,
     pCAD_PLA_FL_COB_AMBULANCIA IN TB_CAD_PLA_PLANO.CAD_PLA_FL_COB_AMBULANCIA%TYPE DEFAULT NULL,
     pCAD_PLA_FL_COB_ACID_TRAB IN TB_CAD_PLA_PLANO.CAD_PLA_FL_COB_ACID_TRAB%TYPE DEFAULT NULL,
     pCAD_PLA_FL_COB_REFEI_ACOMP IN TB_CAD_PLA_PLANO.CAD_PLA_FL_COB_REFEI_ACOMP%TYPE DEFAULT NULL,
     pCAD_PLA_FL_COB_ACOMPANHA IN TB_CAD_PLA_PLANO.CAD_PLA_FL_COB_ACOMPANHA%TYPE DEFAULT NULL,
     pCAD_PLA_CT_CATEGORIA_PLANO IN TB_CAD_PLA_PLANO.CAD_PLA_CT_CATEGORIA_PLANO%TYPE DEFAULT NULL
  )
  is
  /********************************************************************
  *    Procedure: PRC_CAD_PLA_PLANO_U
  *
  *    Data Alteracao: 09/09/2013          Por: PEDRO
  *    Alteracao: Inclusao do campo CAD_PLA_CT_CATEGORIA_PLANO
  *
  *******************************************************************/

   vCAD_PLA_FL_COB_AMBULANCIA TB_CAD_PLA_PLANO.CAD_PLA_FL_COB_AMBULANCIA%TYPE;
   vCAD_PLA_FL_COB_ACID_TRAB TB_CAD_PLA_PLANO.CAD_PLA_FL_COB_ACID_TRAB%TYPE;
   vCAD_PLA_FL_COB_REFEI_ACOMP TB_CAD_PLA_PLANO.CAD_PLA_FL_COB_REFEI_ACOMP%TYPE;
   vCAD_PLA_FL_COB_ACOMPANHA TB_CAD_PLA_PLANO.CAD_PLA_FL_COB_ACOMPANHA%TYPE;

    begin

    IF (pCAD_PLA_FL_COB_AMBULANCIA IS NULL) THEN
       vCAD_PLA_FL_COB_AMBULANCIA := 'N';
    ELSE
       vCAD_PLA_FL_COB_AMBULANCIA := pCAD_PLA_FL_COB_AMBULANCIA;
    END IF;

    IF (pCAD_PLA_FL_COB_ACID_TRAB IS NULL) THEN
       vCAD_PLA_FL_COB_ACID_TRAB := 'N';
    ELSE
       vCAD_PLA_FL_COB_ACID_TRAB := pCAD_PLA_FL_COB_ACID_TRAB;
    END IF;

    IF (pCAD_PLA_FL_COB_REFEI_ACOMP IS NULL) THEN
       vCAD_PLA_FL_COB_REFEI_ACOMP := 'N';
    ELSE
       vCAD_PLA_FL_COB_REFEI_ACOMP := pCAD_PLA_FL_COB_REFEI_ACOMP;
    END IF;

    IF (pCAD_PLA_FL_COB_ACOMPANHA IS NULL) THEN
       vCAD_PLA_FL_COB_ACOMPANHA := 'N';
    ELSE
       vCAD_PLA_FL_COB_ACOMPANHA := pCAD_PLA_FL_COB_ACOMPANHA;
    END IF;

    UPDATE TB_CAD_PLA_PLANO
    SET
        CAD_PLA_CD_PLANO_HAC = UPPER( pCAD_PLA_CD_PLANO_HAC ),
        CAD_PLA_CD_PLANO = UPPER( pCAD_PLA_CD_PLANO ),
        CAD_PLA_CD_TIPOPLANO = UPPER( pCAD_PLA_CD_TIPOPLANO ),
        CAD_PLA_NM_NOME_PLANO = UPPER( pCAD_PLA_NM_NOME_PLANO ),
        CAD_PLA_FL_SITUACAO_PLANO = UPPER( pCAD_PLA_FL_SITUACAO_PLANO ),
        CAD_CNV_ID_CONVENIO = pCAD_CNV_ID_CONVENIO,
        CAD_PLA_DT_ULT_ATUALIZACAO = SYSDATE,
        SEG_USU_ID_USUARIO = pSEG_USU_ID_USUARIO,
        CAD_PLA_DT_INICIO_VIGENCIA = pCAD_PLA_DT_INICIO_VIGENCIA,
        CAD_PLA_DT_FIM_VIGENCIA = pCAD_PLA_DT_FIM_VIGENCIA,
        CAD_PLA_DS_OBS_FIM_VIG = Upper(pCAD_PLA_DS_OBS_FIM_VIG),
        CAD_PLA_FL_EXIGE_GUIA = pCAD_PLA_FL_EXIGE_GUIA,
        CAD_PLA_FL_EXIGE_SENHA_LIB_OK = pCAD_PLA_FL_EXIGE_SENHA_LIB_OK,
        CAD_PLA_FL_LIBERA_EXAME_OK = pCAD_PLA_FL_LIBERA_EXAME_OK,
        CAD_PLA_DS_ORIENTACAO = pCAD_PLA_DS_ORIENTACAO,
        CAD_PLA_FL_AUTORIZA_ONLINE = pCAD_PLA_FL_AUTORIZA_ONLINE,
        CAD_PLA_FL_COB_AMBULANCIA = vCAD_PLA_FL_COB_AMBULANCIA,
        CAD_PLA_FL_COB_ACID_TRAB = vCAD_PLA_FL_COB_ACID_TRAB,
        CAD_PLA_FL_COB_REFEI_ACOMP = vCAD_PLA_FL_COB_REFEI_ACOMP,
        CAD_PLA_FL_COB_ACOMPANHA = vCAD_PLA_FL_COB_ACOMPANHA,
        CAD_PLA_CT_CATEGORIA_PLANO = pCAD_PLA_CT_CATEGORIA_PLANO
    WHERE
        CAD_PLA_ID_PLANO = pCAD_PLA_ID_PLANO;
  end PRC_CAD_PLA_PLANO_U;


 