CREATE OR REPLACE PROCEDURE "PRC_AGE_AGD_AGENDA_I"
  (
     pNewIdt OUT integer,
     pNewIdtAtendimento OUT integer,
     pAGE_AGD_ID IN TB_AGE_AGD_AGENDA.AGE_AGD_ID%type default NULL,
     pAGE_AGD_DT_AGENDA IN TB_AGE_AGD_AGENDA.AGE_AGD_DT_AGENDA%type,
     pAGE_AGD_HR_AGENDA IN TB_AGE_AGD_AGENDA.AGE_AGD_HR_AGENDA%type,
     pAGE_AGD_TP_AGENDA IN TB_AGE_AGD_AGENDA.AGE_AGD_TP_AGENDA%type,
     pAGE_AGD_CD_AMBESP IN TB_AGE_AGD_AGENDA.AGE_AGD_CD_AMBESP%type,
     pAGE_AGD_CD_AMBGRP IN TB_AGE_AGD_AGENDA.AGE_AGD_CD_AMBGRP%type,
     pAGE_AGD_CD_AMBSEQ IN TB_AGE_AGD_AGENDA.AGE_AGD_CD_AMBSEQ%type,
     pAGE_AGD_CD_AMBTP IN TB_AGE_AGD_AGENDA.AGE_AGD_CD_AMBTP%type,
     pAGE_AGD_DT_ATENDIMENTO IN TB_AGE_AGD_AGENDA.AGE_AGD_DT_ATENDIMENTO%type,
     pAGE_AGD_HR_ATENDIMENTO IN TB_AGE_AGD_AGENDA.AGE_AGD_HR_ATENDIMENTO%type,
     pAGE_AGD_FL_STATUS IN TB_AGE_AGD_AGENDA.AGE_AGD_FL_STATUS%type,
     pAGE_AGD_DS_OBSERVACAO IN TB_AGE_AGD_AGENDA.AGE_AGD_DS_OBSERVACAO%type default NULL,
     pSEG_USU_ID_USUARIO IN TB_AGE_AGD_AGENDA.SEG_USU_ID_USUARIO%type,
     pAGE_AGD_CD_INTAMB IN TB_AGE_AGD_AGENDA.AGE_AGD_CD_INTAMB%type default NULL,
     pAGE_AGD_IN_INTAMB IN TB_AGE_AGD_AGENDA.AGE_AGD_IN_INTAMB%type default NULL,
     pAGE_ESM_ID IN TB_AGE_AGD_AGENDA.AGE_ESM_ID%type,
     pCAD_PAC_ID_PACIENTE IN TB_AGE_AGD_AGENDA.CAD_PAC_ID_PACIENTE%type,
     pCAD_PRO_ID_PROFISSIONALEXEC IN TB_AGE_AGD_AGENDA.CAD_PRO_ID_PROFISSIONALEXEC%type,
     pCAD_PRO_ID_PROFISSIONALSOLIC IN TB_AGE_AGD_AGENDA.CAD_PRO_ID_PROFISSIONALSOLIC%type default NULL,
     pAGE_AGD_DT_LIMITE_RETORNO IN TB_AGE_AGD_AGENDA.AGE_AGD_DT_LIMITE_RETORNO%type default NULL,
     pAGE_AGG_ID IN TB_AGE_AGD_AGENDA.AGE_AGG_ID%type default NULL,
     pCAD_PRD_ID IN TB_AGE_AGD_AGENDA.CAD_PRD_ID%type default NULL,
     pSEG_USU_ID_DESBLOQUEIO IN TB_AGE_AGD_AGENDA.SEG_USU_ID_DESBLOQUEIO%type default NULL,
     pSEG_USU_ID_AGENENCESP IN TB_AGE_AGD_AGENDA.SEG_USU_ID_AGENENCESP%type default NULL,
     pSEG_USU_ID_DESBLOQ_PAC_CRON IN TB_AGE_AGD_AGENDA.SEG_USU_ID_DESBLOQ_PAC_CRON%TYPE DEFAULT NULL,
     pAGE_AGD_FL_EXIGE_PROFISSIONAL IN TB_AGE_AGD_AGENDA.AGE_AGD_FL_EXIGE_PROFISSIONAL%type Default NULL,
     pAGE_AGD_FL_TELEMEDICINA IN TB_AGE_AGD_AGENDA.AGE_AGD_FL_TELEMEDICINA%Type Default Null,
     pCAD_UNI_ID_UNID_LOGIN_USU IN TB_AGE_AGD_AGENDA.CAD_UNI_ID_UNID_LOGIN_USU%Type Default Null,
     pAGE_AGD_CD_REMARCACAO IN TB_AGE_AGD_AGENDA.AGE_AGD_CD_REMARCACAO%Type Default Null
  )
  is
  /********************************************************************
  *    Procedure: PRC_AGE_AGD_AGENDA_I
  * 
  *    Data Alteracao: 18/10/2023            Por: Pedro
  *    add AGE_AGD_CD_REMARCACAO
  *
  *
  *******************************************************************/
    lIdtRetorno integer;
    v_cd_intamb NUMBER;
    pTipoPlano TB_CAD_PLA_PLANO.CAD_PLA_CD_TIPOPLANO%type;
  begin
    SELECT SEQ_AGE_AGD_01.NextVal INTO lIdtRetorno FROM DUAL;
    SELECT SEQATEND.NextVal INTO v_cd_intamb FROM DUAL;
    INSERT INTO TB_AGE_AGD_AGENDA
    (
       AGE_AGD_ID,
       AGE_AGD_DT_AGENDA,
       AGE_AGD_HR_AGENDA,
       AGE_AGD_TP_AGENDA,
       AGE_AGD_CD_AMBESP,
       AGE_AGD_CD_AMBGRP,
       AGE_AGD_CD_AMBSEQ,
       AGE_AGD_CD_AMBTP,
       AGE_AGD_DT_ATENDIMENTO,
       AGE_AGD_HR_ATENDIMENTO,
       AGE_AGD_FL_STATUS,
       AGE_AGD_DS_OBSERVACAO,
       SEG_USU_ID_USUARIO,
       AGE_AGD_DT_ULTIMA_ATUALIZACAO,
       AGE_AGD_CD_INTAMB,
       AGE_AGD_IN_INTAMB,
       AGE_ESM_ID,
       CAD_PAC_ID_PACIENTE,
       CAD_PRO_ID_PROFISSIONALEXEC,
       CAD_PRO_ID_PROFISSIONALSOLIC,
       AGE_AGD_DT_LIMITE_RETORNO,
       AGE_AGG_ID,
       CAD_PRD_ID,
       SEG_USU_ID_DESBLOQUEIO,
       SEG_USU_ID_AGENENCESP,
       SEG_USU_ID_DESBLOQ_PAC_CRON,
       AGE_AGD_FL_EXIGE_PROFISSIONAL,
       CAD_UNI_ID_UNID_LOGIN_USU,
       AGE_AGD_FL_TELEMEDICINA,
       AGE_AGD_CD_REMARCACAO
    )
    VALUES
    (
       lIdtRetorno,
       pAGE_AGD_DT_AGENDA,
       pAGE_AGD_HR_AGENDA,
       pAGE_AGD_TP_AGENDA,
       pAGE_AGD_CD_AMBESP,
       pAGE_AGD_CD_AMBGRP,
       pAGE_AGD_CD_AMBSEQ,
       pAGE_AGD_CD_AMBTP,
       pAGE_AGD_DT_ATENDIMENTO,
       pAGE_AGD_HR_ATENDIMENTO,
       pAGE_AGD_FL_STATUS,
       Upper(pAGE_AGD_DS_OBSERVACAO),
       pSEG_USU_ID_USUARIO,
       sysdate(),
       v_cd_intamb, -- pAGE_AGD_CD_INTAMB,
       pAGE_AGD_IN_INTAMB,
       pAGE_ESM_ID,
       pCAD_PAC_ID_PACIENTE,
       pCAD_PRO_ID_PROFISSIONALEXEC,
       pCAD_PRO_ID_PROFISSIONALSOLIC,
       pAGE_AGD_DT_LIMITE_RETORNO,
       pAGE_AGG_ID,
       pCAD_PRD_ID,
       pSEG_USU_ID_DESBLOQUEIO,
       pSEG_USU_ID_AGENENCESP,
       pSEG_USU_ID_DESBLOQ_PAC_CRON,
       pAGE_AGD_FL_EXIGE_PROFISSIONAL,
       pCAD_UNI_ID_UNID_LOGIN_USU,
       pAGE_AGD_FL_TELEMEDICINA,
       pAGE_AGD_CD_REMARCACAO
    );
    pNewIdt := lIdtRetorno;
    pNewIdtAtendimento:= v_cd_intamb;
  end PRC_AGE_AGD_AGENDA_I;
