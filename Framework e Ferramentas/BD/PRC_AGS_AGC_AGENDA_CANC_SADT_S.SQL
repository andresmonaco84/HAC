--PRC_AGS_AGC_AGENDA_CANC_SADT_S
create or replace procedure PRC_AGS_AGC_AGENDA_CANC_SADT_S 
(
     pLIB_LPR_ID IN TB_AGS_AGC_AGENDA_CANC_SADT.LIB_LPR_ID%type DEFAULT NULL,
     pCAD_PRD_ID IN TB_AGS_AGC_AGENDA_CANC_SADT.CAD_PRD_ID%type DEFAULT NULL,
     pAGS_AGE_DT_AGENDAMENTO IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_DT_AGENDAMENTO%type DEFAULT NULL,
     pAGS_AGE_HR_AGENDAMENTO IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_HR_AGENDAMENTO%type DEFAULT NULL,
     pAGS_AGE_TP_HORARIO IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_TP_HORARIO%type DEFAULT NULL,
     pAGS_AGE_TP_AGENDAMENTO IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_TP_AGENDAMENTO%type DEFAULT NULL,
     pAGS_AGE_DT_ATENDIMENTO IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_DT_ATENDIMENTO%type DEFAULT NULL,
     pAGS_AGE_HR_ATENDIMENTO IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_HR_ATENDIMENTO%type DEFAULT NULL,
     pAGS_AGE_FL_STATUS IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_FL_STATUS%type DEFAULT NULL,
     pAGS_AGE_DS_OBSERVACAO IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_DS_OBSERVACAO%type DEFAULT NULL,
     pSEG_USU_ID_USUARIO_AGENDA IN TB_AGS_AGC_AGENDA_CANC_SADT.SEG_USU_ID_USUARIO_AGENDA%type DEFAULT NULL,
     pAGS_AGE_DT_ULT_ATU_AGENDA IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_DT_ULT_ATU_AGENDA%type DEFAULT NULL,
     pAGS_AGE_CD_INTAMB IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_CD_INTAMB%type DEFAULT NULL,
     pAGS_AGE_IN_ORIGEM_INTAMB IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_IN_ORIGEM_INTAMB%type DEFAULT NULL,
     pAGS_ESM_ID IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_ESM_ID%type DEFAULT NULL,
     pCAD_PAC_ID_PACIENTE IN TB_AGS_AGC_AGENDA_CANC_SADT.CAD_PAC_ID_PACIENTE%type DEFAULT NULL,
     pCAD_PRO_ID_PROFISSIONALEXEC IN TB_AGS_AGC_AGENDA_CANC_SADT.CAD_PRO_ID_PROFISSIONALEXEC%type DEFAULT NULL,
     pAGS_AGG_ID IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGG_ID%type DEFAULT NULL,
     pSEG_USU_ID_USUARIO_CANC IN TB_AGS_AGC_AGENDA_CANC_SADT.SEG_USU_ID_USUARIO_CANC%type DEFAULT NULL,
     pAGS_AGC_DT_CANCELAMENTO IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGC_DT_CANCELAMENTO%type DEFAULT NULL,
     pAGS_AGE_ID IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_ID%type DEFAULT NULL,
     pAGS_AGE_DS_DUR_CIRURGIA IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_DS_DUR_CIRURGIA%type DEFAULT NULL,
     pAGS_AGE_CD_PROF_CIRURGIAO IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_CD_PROF_CIRURGIAO%type DEFAULT NULL,
     pAGS_AGE_CD_PROF_ASSISTENTE IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_CD_PROF_ASSISTENTE%type DEFAULT NULL,
     pAGS_AGE_NM_INSTRUMENTADOR IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_NM_INSTRUMENTADOR%type DEFAULT NULL,
     pAGS_AGE_CD_PROF_ANESTESIST IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_CD_PROF_ANESTESIST%type DEFAULT NULL,
     pAGS_AGE_DS_INST_APAR_ESP IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_DS_INST_APAR_ESP%type DEFAULT NULL,
     pAGS_AGE_FL_ANESTESIA_OK IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_FL_ANESTESIA_OK%type DEFAULT NULL,
     pAGS_AGE_FL_TRANSFUSAO_OK IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_FL_TRANSFUSAO_OK%type DEFAULT NULL,
     pAGS_AGE_FL_CONGELACAO_OK IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_FL_CONGELACAO_OK%type DEFAULT NULL,
     pAGS_AGE_NM_CIRCULANTE IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_NM_CIRCULANTE%type DEFAULT NULL,
     pAGS_AGE_NM_ENFERM_CHEFE IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_NM_ENFERM_CHEFE%type DEFAULT NULL,
     pCAD_TAN_TP_ANESTESIA IN TB_AGS_AGC_AGENDA_CANC_SADT.CAD_TAN_TP_ANESTESIA%type DEFAULT NULL,
     pAGS_AGE_FL_CIRUR_SUSP_OK IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_FL_CIRUR_SUSP_OK%type DEFAULT NULL,
     pAGS_AGE_FL_CIRUR_ADIAD_OK IN TB_AGS_AGC_AGENDA_CANC_SADT.AGS_AGE_FL_CIRUR_ADIAD_OK%type DEFAULT NULL,
     io_cursor OUT PKG_CURSOR.t_cursor
) 
is
/********************************************************************
*    Procedure: PRC_AGS_AGC_AGENDA_CANC_SADT_S
* 
*    Data Criacao: 	data da  criação   Por: Nome do Analista
*    Data Alteracao:	data da alteração  Por: Nome do Analista
*
*    Funcao: Descrição da funcionalidade da Stored Procedure
*
*******************************************************************/
 v_cursor PKG_CURSOR.t_cursor;
  V_WHERE  varchar2(5000);
  V_SELECT  varchar2(5000);
begin
  V_WHERE := NULL;
  IF pLIB_LPR_ID IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND LIB_LPR_ID = ' || pLIB_LPR_ID; END IF;
IF pCAD_PRD_ID IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_PRD_ID = ' || pCAD_PRD_ID; END IF;
IF pAGS_AGE_DT_AGENDAMENTO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_DT_AGENDAMENTO = ' || CHR(39) || pAGS_AGE_DT_AGENDAMENTO || CHR(39); END IF;
IF pAGS_AGE_HR_AGENDAMENTO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_HR_AGENDAMENTO = ' || pAGS_AGE_HR_AGENDAMENTO; END IF;
IF pAGS_AGE_TP_HORARIO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_TP_HORARIO = ' || CHR(39) || pAGS_AGE_TP_HORARIO || CHR(39); END IF;
IF pAGS_AGE_TP_AGENDAMENTO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_TP_AGENDAMENTO = ' || CHR(39) || pAGS_AGE_TP_AGENDAMENTO || CHR(39); END IF;
IF pAGS_AGE_DT_ATENDIMENTO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_DT_ATENDIMENTO = ' || CHR(39) || pAGS_AGE_DT_ATENDIMENTO || CHR(39); END IF;
IF pAGS_AGE_HR_ATENDIMENTO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_HR_ATENDIMENTO = ' || pAGS_AGE_HR_ATENDIMENTO; END IF;
IF pAGS_AGE_FL_STATUS IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_FL_STATUS = ' || CHR(39) || pAGS_AGE_FL_STATUS || CHR(39); END IF;
IF pAGS_AGE_DS_OBSERVACAO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_DS_OBSERVACAO = ' || CHR(39) || pAGS_AGE_DS_OBSERVACAO || CHR(39); END IF;
IF pSEG_USU_ID_USUARIO_AGENDA IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND SEG_USU_ID_USUARIO_AGENDA = ' || pSEG_USU_ID_USUARIO_AGENDA; END IF;
IF pAGS_AGE_DT_ULT_ATU_AGENDA IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_DT_ULT_ATU_AGENDA = ' || CHR(39) || pAGS_AGE_DT_ULT_ATU_AGENDA || CHR(39); END IF;
IF pAGS_AGE_CD_INTAMB IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_CD_INTAMB = ' || pAGS_AGE_CD_INTAMB; END IF;
IF pAGS_AGE_IN_ORIGEM_INTAMB IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_IN_ORIGEM_INTAMB = ' || CHR(39) || pAGS_AGE_IN_ORIGEM_INTAMB || CHR(39); END IF;
IF pAGS_ESM_ID IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_ESM_ID = ' || pAGS_ESM_ID; END IF;
IF pCAD_PAC_ID_PACIENTE IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_PAC_ID_PACIENTE = ' || pCAD_PAC_ID_PACIENTE; END IF;
IF pCAD_PRO_ID_PROFISSIONALEXEC IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_PRO_ID_PROFISSIONALEXEC = ' || pCAD_PRO_ID_PROFISSIONALEXEC; END IF;
IF pAGS_AGG_ID IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGG_ID = ' || pAGS_AGG_ID; END IF;
IF pSEG_USU_ID_USUARIO_CANC IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND SEG_USU_ID_USUARIO_CANC = ' || pSEG_USU_ID_USUARIO_CANC; END IF;
IF pAGS_AGC_DT_CANCELAMENTO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGC_DT_CANCELAMENTO = ' || CHR(39) || pAGS_AGC_DT_CANCELAMENTO || CHR(39); END IF;
IF pAGS_AGE_ID IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_ID = ' || pAGS_AGE_ID; END IF;
IF pAGS_AGE_DS_DUR_CIRURGIA IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_DS_DUR_CIRURGIA = ' || pAGS_AGE_DS_DUR_CIRURGIA; END IF;
IF pAGS_AGE_CD_PROF_CIRURGIAO IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_CD_PROF_CIRURGIAO = ' || pAGS_AGE_CD_PROF_CIRURGIAO; END IF;
IF pAGS_AGE_CD_PROF_ASSISTENTE IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_CD_PROF_ASSISTENTE = ' || pAGS_AGE_CD_PROF_ASSISTENTE; END IF;
IF pAGS_AGE_NM_INSTRUMENTADOR IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_NM_INSTRUMENTADOR = ' || CHR(39) || pAGS_AGE_NM_INSTRUMENTADOR || CHR(39); END IF;
IF pAGS_AGE_CD_PROF_ANESTESIST IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_CD_PROF_ANESTESIST = ' || pAGS_AGE_CD_PROF_ANESTESIST; END IF;
IF pAGS_AGE_DS_INST_APAR_ESP IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_DS_INST_APAR_ESP = ' || CHR(39) || pAGS_AGE_DS_INST_APAR_ESP || CHR(39); END IF;
IF pAGS_AGE_FL_ANESTESIA_OK IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_FL_ANESTESIA_OK = ' || CHR(39) || pAGS_AGE_FL_ANESTESIA_OK || CHR(39); END IF;
IF pAGS_AGE_FL_TRANSFUSAO_OK IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_FL_TRANSFUSAO_OK = ' || CHR(39) || pAGS_AGE_FL_TRANSFUSAO_OK || CHR(39); END IF;
IF pAGS_AGE_FL_CONGELACAO_OK IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_FL_CONGELACAO_OK = ' || CHR(39) || pAGS_AGE_FL_CONGELACAO_OK || CHR(39); END IF;
IF pAGS_AGE_NM_CIRCULANTE IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_NM_CIRCULANTE = ' || CHR(39) || pAGS_AGE_NM_CIRCULANTE || CHR(39); END IF;
IF pAGS_AGE_NM_ENFERM_CHEFE IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_NM_ENFERM_CHEFE = ' || CHR(39) || pAGS_AGE_NM_ENFERM_CHEFE || CHR(39); END IF;
IF pCAD_TAN_TP_ANESTESIA IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND CAD_TAN_TP_ANESTESIA = ' || pCAD_TAN_TP_ANESTESIA; END IF;
IF pAGS_AGE_FL_CIRUR_SUSP_OK IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_FL_CIRUR_SUSP_OK = ' || CHR(39) || pAGS_AGE_FL_CIRUR_SUSP_OK || CHR(39); END IF;
IF pAGS_AGE_FL_CIRUR_ADIAD_OK IS NOT NULL THEN V_WHERE:= V_WHERE || ' AND AGS_AGE_FL_CIRUR_ADIAD_OK = ' || CHR(39) || pAGS_AGE_FL_CIRUR_ADIAD_OK || CHR(39); END IF;
 
   V_SELECT := '
SELECT	
       LIB_LPR_ID,
       CAD_PRD_ID,
       AGS_AGE_DT_AGENDAMENTO,
       AGS_AGE_HR_AGENDAMENTO,
       AGS_AGE_TP_HORARIO,
       AGS_AGE_TP_AGENDAMENTO,
       AGS_AGE_DT_ATENDIMENTO,
       AGS_AGE_HR_ATENDIMENTO,
       AGS_AGE_FL_STATUS,
       AGS_AGE_DS_OBSERVACAO,
       SEG_USU_ID_USUARIO_AGENDA,
       AGS_AGE_DT_ULT_ATU_AGENDA,
       AGS_AGE_CD_INTAMB,
       AGS_AGE_IN_ORIGEM_INTAMB,
       AGS_ESM_ID,
       CAD_PAC_ID_PACIENTE,
       CAD_PRO_ID_PROFISSIONALEXEC,
       AGS_AGG_ID,
       SEG_USU_ID_USUARIO_CANC,
       AGS_AGC_DT_CANCELAMENTO,
       AGS_AGE_ID,
       AGS_AGE_DS_DUR_CIRURGIA,
       AGS_AGE_CD_PROF_CIRURGIAO,
       AGS_AGE_CD_PROF_ASSISTENTE,
       AGS_AGE_NM_INSTRUMENTADOR,
       AGS_AGE_CD_PROF_ANESTESIST,
       AGS_AGE_DS_INST_APAR_ESP,
       AGS_AGE_FL_ANESTESIA_OK,
       AGS_AGE_FL_TRANSFUSAO_OK,
       AGS_AGE_FL_CONGELACAO_OK,
       AGS_AGE_NM_CIRCULANTE,
       AGS_AGE_NM_ENFERM_CHEFE,
       CAD_TAN_TP_ANESTESIA,
       AGS_AGE_FL_CIRUR_SUSP_OK,
       AGS_AGE_FL_CIRUR_ADIAD_OK
FROM TB_AGS_AGC_AGENDA_CANC_SADT
WHERE null is null  '    ;
       
OPEN v_cursor FOR
  V_SELECT || V_WHERE ;
  io_cursor := v_cursor;
end PRC_AGS_AGC_AGENDA_CANC_SADT_S;
