CREATE OR REPLACE PROCEDURE "PRC_CAD_PAC_PACIENTE_U"
  (
     pCAD_PAC_ID_PACIENTE IN TB_CAD_PAC_PACIENTE.CAD_PAC_ID_PACIENTE%type,
     pCAD_CNV_ID_CONVENIO IN TB_CAD_PAC_PACIENTE.CAD_CNV_ID_CONVENIO%type,
     pCAD_PLA_ID_PLANO IN TB_CAD_PAC_PACIENTE.CAD_PLA_ID_PLANO%type,
     pCAD_PAC_CD_CREDENCIAL IN TB_CAD_PAC_PACIENTE.CAD_PAC_CD_CREDENCIAL%type default NULL,
     pCAD_EMP_ID_EMPRESA IN TB_CAD_PAC_PACIENTE.CAD_EMP_ID_EMPRESA%type default NULL,
     pCAD_PAC_NR_PRONTUARIO IN TB_CAD_PAC_PACIENTE.CAD_PAC_NR_PRONTUARIO%type default NULL,
     pCAD_PAC_NM_TITULAR IN TB_CAD_PAC_PACIENTE.CAD_PAC_NM_TITULAR%type default NULL,
     pCAD_PAC_DT_VALIDADECREDENCIAL IN TB_CAD_PAC_PACIENTE.CAD_PAC_DT_VALIDADECREDENCIAL%type default NULL,
     pCAD_PAC_CD_CNS IN TB_CAD_PAC_PACIENTE.CAD_PAC_CD_CNS%type default NULL,
     pCAD_PAC_DS_OBSERVACAO IN TB_CAD_PAC_PACIENTE.CAD_PAC_DS_OBSERVACAO%type default NULL,
     pCAD_PAC_FL_VIP_OK IN TB_CAD_PAC_PACIENTE.CAD_PAC_FL_VIP_OK%type default NULL,  
     pCAD_PAC_CD_CODCIP IN TB_CAD_PAC_PACIENTE.CAD_PAC_CD_CODCIP%type default NULL,
     pCAD_PAC_CD_CODBEN IN TB_CAD_PAC_PACIENTE.CAD_PAC_CD_CODBEN%type default NULL,
     pCAD_PAC_CD_CODBENSEQ IN TB_CAD_PAC_PACIENTE.CAD_PAC_CD_CODBENSEQ%type default NULL,
     pSEG_USU_ID_USUARIO IN TB_CAD_PAC_PACIENTE.SEG_USU_ID_USUARIO%type,
     pCAD_PES_ID_PESSOA IN TB_CAD_PAC_PACIENTE.CAD_PES_ID_PESSOA%type,
     pCAD_PES_NM_PESSOA IN TB_CAD_PES_PESSOA.CAD_PES_NM_PESSOA%TYPE DEFAULT NULL,
     pCAD_PES_DT_NASCIMENTO IN TB_CAD_PES_PESSOA.CAD_PES_DT_NASCIMENTO%TYPE DEFAULT NULL,
     pCAD_PES_TP_SEXO IN TB_CAD_PES_PESSOA.CAD_PES_TP_SEXO%TYPE DEFAULT NULL,
     pCAD_PAC_CD_SUBPLANO        IN TB_CAD_PAC_PACIENTE.CAD_PAC_CD_SUBPLANO%TYPE DEFAULT NULL,
     pCAD_PAC_TP_SANGUINEO       IN TB_CAD_PAC_PACIENTE.CAD_PAC_TP_SANGUINEO%TYPE DEFAULT NULL,
     pAUX_PRF_CD_CODIGO          IN TB_AUX_PRF_PROFISSAO.AUX_PRF_CD_CODIGO%TYPE DEFAULT NULL,
     pAUX_NAC_CD_CODIGO          IN TB_AUX_NAC_NACIONALIDADE.AUX_NAC_CD_CODIGO%TYPE DEFAULT NULL,
     pCAD_PAC_FL_DOADORORGAOS_OK IN TB_CAD_PAC_PACIENTE.CAD_PAC_FL_DOADORORGAOS_OK%TYPE DEFAULT NULL,
     pCAD_PAC_FL_RESTRICAO_PA_OK IN TB_CAD_PAC_PACIENTE.CAD_PAC_FL_RESTRICAO_PA_OK%TYPE DEFAULT NULL,
     pCAD_PAC_FL_ATIVO_OK IN TB_CAD_PAC_PACIENTE.CAD_PAC_FL_ATIVO_OK%TYPE DEFAULT NULL
  )
  is
  /********************************************************************
  *    Procedure: PRC_CAD_PAC_PACIENTE_U
  *
  *    Data Alteracao:  10/1/2012           Por: Pedro
  *    Alteracao:       PRC_CAD_PMD_CORRECAO
  *
  *******************************************************************/
  begin
    -- Gravo na tabela de Cadastro de Paciente
    UPDATE TB_CAD_PAC_PACIENTE
    SET
        CAD_CNV_ID_CONVENIO = pCAD_CNV_ID_CONVENIO,
        CAD_PLA_ID_PLANO = pCAD_PLA_ID_PLANO,
        CAD_PAC_CD_CREDENCIAL = Upper(pCAD_PAC_CD_CREDENCIAL),
        CAD_EMP_ID_EMPRESA = pCAD_EMP_ID_EMPRESA,
        CAD_PAC_NR_PRONTUARIO = pCAD_PAC_NR_PRONTUARIO,
        CAD_PAC_NM_TITULAR = UPPER(pCAD_PAC_NM_TITULAR),
        CAD_PAC_DT_VALIDADECREDENCIAL = pCAD_PAC_DT_VALIDADECREDENCIAL,
        CAD_PAC_CD_CNS = pCAD_PAC_CD_CNS,
        CAD_PAC_DS_OBSERVACAO = UPPER(pCAD_PAC_DS_OBSERVACAO),
        CAD_PAC_FL_VIP_OK = pCAD_PAC_FL_VIP_OK,
        CAD_PAC_CD_CODCIP = DECODE(pCAD_PAC_CD_CODCIP, NULL, CAD_PAC_CD_CODCIP, pCAD_PAC_CD_CODCIP),
        CAD_PAC_CD_CODBEN = pCAD_PAC_CD_CODBEN,
        CAD_PAC_CD_CODBENSEQ = pCAD_PAC_CD_CODBENSEQ,
        SEG_USU_ID_USUARIO = pSEG_USU_ID_USUARIO,
        CAD_PAC_DT_ULTIMA_ATUALIZACAO = SYSDATE,
        CAD_PES_ID_PESSOA = pCAD_PES_ID_PESSOA,        
        CAD_PAC_CD_SUBPLANO = UPPER(pCAD_PAC_CD_SUBPLANO),
        CAD_PAC_TP_SANGUINEO = pCAD_PAC_TP_SANGUINEO,
        AUX_PRF_CD_CODIGO = pAUX_PRF_CD_CODIGO,
        AUX_NAC_CD_CODIGO = pAUX_NAC_CD_CODIGO,
        CAD_PAC_FL_DOADORORGAOS_OK = pCAD_PAC_FL_DOADORORGAOS_OK--,
     --   CAD_PAC_FL_RESTRICAO_PA_OK = decode(pCAD_CNV_ID_CONVENIO, 282, decode(pCAD_PAC_FL_RESTRICAO_PA_OK,'','N','N','N','S'), 'N')
        --CAD_PAC_FL_ATIVO_OK = decode(pCAD_PAC_FL_ATIVO_OK,NULL,'S',pCAD_PAC_FL_ATIVO_OK)
    WHERE
        CAD_PAC_ID_PACIENTE = pCAD_PAC_ID_PACIENTE;
declare 
 begin
    PRC_CAD_PMD_CORRECAO(pCAD_PAC_ID_PACIENTE);
 exception when OTHERS then null;
end;
  end PRC_CAD_PAC_PACIENTE_U;
 