create or replace procedure PRC_FAT_COC_CONTA_CONSUMO_I
(
     pNewIdt OUT integer,
     pFAT_COC_ID IN TB_FAT_COC_CONTA_CONSUMO.FAT_COC_ID%type default NULL,
     pFAT_COC_TP_DESTINO_CONTA IN TB_FAT_COC_CONTA_CONSUMO.FAT_COC_TP_DESTINO_CONTA%type default NULL,
     pATD_ATE_ID IN TB_FAT_COC_CONTA_CONSUMO.ATD_ATE_ID%type,
     pCAD_PAC_ID_PACIENTE IN TB_FAT_COC_CONTA_CONSUMO.CAD_PAC_ID_PACIENTE%type,
     pFAT_COC_VL_TOTAL_ORIGINAL IN TB_FAT_COC_CONTA_CONSUMO.FAT_COC_VL_TOTAL_ORIGINAL%type default NULL,
     pFAT_COC_PC_DESCONTO IN TB_FAT_COC_CONTA_CONSUMO.FAT_COC_PC_DESCONTO%type default NULL,
     pFAT_COC_VL_DESCONTO IN TB_FAT_COC_CONTA_CONSUMO.FAT_COC_VL_DESCONTO%type default NULL,
     pFAT_COC_VL_TOTAL_CONTA IN TB_FAT_COC_CONTA_CONSUMO.FAT_COC_VL_TOTAL_CONTA%type default NULL,
     pFAT_COC_DT_INI_CONSUMO IN TB_FAT_COC_CONTA_CONSUMO.FAT_COC_DT_INI_CONSUMO%type,
     pFAT_COC_HR_INI_CONSUMO IN TB_FAT_COC_CONTA_CONSUMO.FAT_COC_HR_INI_CONSUMO%type,
     pFAT_COC_DT_FIM_CONSUMO IN TB_FAT_COC_CONTA_CONSUMO.FAT_COC_DT_FIM_CONSUMO%type default NULL,
     pFAT_COC_HR_FIM_CONSUMO IN TB_FAT_COC_CONTA_CONSUMO.FAT_COC_HR_FIM_CONSUMO%type default NULL,
     pFAT_COC_DT_ULTIMA_ATUALIZACAO IN TB_FAT_COC_CONTA_CONSUMO.FAT_COC_DT_ULTIMA_ATUALIZACAO%type,
     pSEG_USU_ID_USUARIO IN TB_FAT_COC_CONTA_CONSUMO.SEG_USU_ID_USUARIO%type,
     pFAT_COC_FL_STATUS IN TB_FAT_COC_CONTA_CONSUMO.FAT_COC_FL_STATUS%type	
) 
is
/********************************************************************
*    Procedure: PRC_FAT_COC_CONTA_CONSUMO_I
* 
*    Data Criacao: 	data da  criação   Por: Nome do Analista
*    Data Alteracao:	data da alteração  Por: Nome do Analista
*
*    Funcao: Descrição da funcionalidade da Stored Procedure
*
*******************************************************************/  
    max_ccp integer;
	  
begin
    SELECT NVL(MAX(FAT_COC_ID),0) + 1 
      INTO max_ccp
      FROM TB_FAT_COC_CONTA_CONSUMO
     WHERE FAT_COC_ID = pFAT_COC_ID
       AND ATD_ATE_ID = pATD_ATE_ID
       AND CAD_PAC_ID_PACIENTE = pCAD_PAC_ID_PACIENTE;
	    
INSERT INTO TB_FAT_COC_CONTA_CONSUMO
(
       FAT_COC_ID,
       FAT_COC_TP_DESTINO_CONTA,
       ATD_ATE_ID,
       CAD_PAC_ID_PACIENTE,
       FAT_COC_VL_TOTAL_ORIGINAL,
       FAT_COC_PC_DESCONTO,
       FAT_COC_VL_DESCONTO,
       FAT_COC_VL_TOTAL_CONTA,
       FAT_COC_DT_INI_CONSUMO,
       FAT_COC_HR_INI_CONSUMO,
       FAT_COC_DT_FIM_CONSUMO,
       FAT_COC_HR_FIM_CONSUMO,
       FAT_COC_DT_ULTIMA_ATUALIZACAO,
       SEG_USU_ID_USUARIO,
       FAT_COC_FL_STATUS
)
VALUES
(
      max_ccp,
	     pFAT_COC_TP_DESTINO_CONTA,
	     pATD_ATE_ID,
	     pCAD_PAC_ID_PACIENTE,
	     pFAT_COC_VL_TOTAL_ORIGINAL,
	     pFAT_COC_PC_DESCONTO,
	     pFAT_COC_VL_DESCONTO,
	     pFAT_COC_VL_TOTAL_CONTA,
	     pFAT_COC_DT_INI_CONSUMO,
	     pFAT_COC_HR_INI_CONSUMO,
	     pFAT_COC_DT_FIM_CONSUMO,
	     pFAT_COC_HR_FIM_CONSUMO,
	     pFAT_COC_DT_ULTIMA_ATUALIZACAO,
	     pSEG_USU_ID_USUARIO,
	     pFAT_COC_FL_STATUS
);
    pNewIdt := max_ccp;	
    
end PRC_FAT_COC_CONTA_CONSUMO_I;